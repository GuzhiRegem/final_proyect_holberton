{"ast":null,"code":"!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = e() : \"function\" == typeof define && define.amd ? define(e) : (t = t || self).MapboxDraw = e();\n}(this, function () {\n  \"use strict\";\n\n  var t = function (t, e) {\n    var n = {\n      drag: [],\n      click: [],\n      mousemove: [],\n      mousedown: [],\n      mouseup: [],\n      mouseout: [],\n      keydown: [],\n      keyup: [],\n      touchstart: [],\n      touchmove: [],\n      touchend: [],\n      tap: []\n    },\n        o = {\n      on: function (t, e, o) {\n        if (void 0 === n[t]) throw new Error(\"Invalid event type: \" + t);\n        n[t].push({\n          selector: e,\n          fn: o\n        });\n      },\n      render: function (t) {\n        e.store.featureChanged(t);\n      }\n    },\n        r = function (t, r) {\n      for (var i = n[t], a = i.length; a--;) {\n        var s = i[a];\n\n        if (s.selector(r)) {\n          s.fn.call(o, r) || e.store.render(), e.ui.updateMapClasses();\n          break;\n        }\n      }\n    };\n\n    return t.start.call(o), {\n      render: t.render,\n      stop: function () {\n        t.stop && t.stop();\n      },\n      trash: function () {\n        t.trash && (t.trash(), e.store.render());\n      },\n      combineFeatures: function () {\n        t.combineFeatures && t.combineFeatures();\n      },\n      uncombineFeatures: function () {\n        t.uncombineFeatures && t.uncombineFeatures();\n      },\n      drag: function (t) {\n        r(\"drag\", t);\n      },\n      click: function (t) {\n        r(\"click\", t);\n      },\n      mousemove: function (t) {\n        r(\"mousemove\", t);\n      },\n      mousedown: function (t) {\n        r(\"mousedown\", t);\n      },\n      mouseup: function (t) {\n        r(\"mouseup\", t);\n      },\n      mouseout: function (t) {\n        r(\"mouseout\", t);\n      },\n      keydown: function (t) {\n        r(\"keydown\", t);\n      },\n      keyup: function (t) {\n        r(\"keyup\", t);\n      },\n      touchstart: function (t) {\n        r(\"touchstart\", t);\n      },\n      touchmove: function (t) {\n        r(\"touchmove\", t);\n      },\n      touchend: function (t) {\n        r(\"touchend\", t);\n      },\n      tap: function (t) {\n        r(\"tap\", t);\n      }\n    };\n  },\n      e = 6378137;\n\n  function n(t) {\n    var e = 0;\n\n    if (t && t.length > 0) {\n      e += Math.abs(o(t[0]));\n\n      for (var n = 1; n < t.length; n++) e -= Math.abs(o(t[n]));\n    }\n\n    return e;\n  }\n\n  function o(t) {\n    var n,\n        o,\n        i,\n        a,\n        s,\n        u,\n        c = 0,\n        l = t.length;\n\n    if (l > 2) {\n      for (u = 0; u < l; u++) u === l - 2 ? (i = l - 2, a = l - 1, s = 0) : u === l - 1 ? (i = l - 1, a = 0, s = 1) : (i = u, a = u + 1, s = u + 2), n = t[i], o = t[a], c += (r(t[s][0]) - r(n[0])) * Math.sin(r(o[1]));\n\n      c = c * e * e / 2;\n    }\n\n    return c;\n  }\n\n  function r(t) {\n    return t * Math.PI / 180;\n  }\n\n  var i = {\n    geometry: function t(e) {\n      var o,\n          r = 0;\n\n      switch (e.type) {\n        case \"Polygon\":\n          return n(e.coordinates);\n\n        case \"MultiPolygon\":\n          for (o = 0; o < e.coordinates.length; o++) r += n(e.coordinates[o]);\n\n          return r;\n\n        case \"Point\":\n        case \"MultiPoint\":\n        case \"LineString\":\n        case \"MultiLineString\":\n          return 0;\n\n        case \"GeometryCollection\":\n          for (o = 0; o < e.geometries.length; o++) r += t(e.geometries[o]);\n\n          return r;\n      }\n    },\n    ring: o\n  },\n      a = \"mapboxgl-ctrl\",\n      s = \"mapbox-gl-draw_ctrl-draw-btn\",\n      u = \"mapbox-gl-draw_line\",\n      c = \"mapbox-gl-draw_polygon\",\n      l = \"mapbox-gl-draw_point\",\n      d = \"mapbox-gl-draw_trash\",\n      p = \"mapbox-gl-draw_combine\",\n      f = \"mapbox-gl-draw_uncombine\",\n      h = \"mapboxgl-ctrl-group\",\n      g = \"active\",\n      y = \"mapbox-gl-draw_boxselect\",\n      v = \"mapbox-gl-draw-hot\",\n      m = \"mapbox-gl-draw-cold\",\n      b = \"add\",\n      _ = \"move\",\n      S = \"drag\",\n      x = \"pointer\",\n      C = \"none\",\n      E = {\n    POLYGON: \"polygon\",\n    LINE: \"line_string\",\n    POINT: \"point\"\n  },\n      M = \"Feature\",\n      w = \"Polygon\",\n      I = \"LineString\",\n      L = \"Point\",\n      P = \"FeatureCollection\",\n      F = \"Multi\",\n      O = \"MultiPoint\",\n      k = \"MultiLineString\",\n      T = \"MultiPolygon\",\n      j = {\n    DRAW_LINE_STRING: \"draw_line_string\",\n    DRAW_POLYGON: \"draw_polygon\",\n    DRAW_POINT: \"draw_point\",\n    SIMPLE_SELECT: \"simple_select\",\n    DIRECT_SELECT: \"direct_select\",\n    STATIC: \"static\"\n  },\n      A = \"draw.create\",\n      D = \"draw.delete\",\n      N = \"draw.update\",\n      U = \"draw.selectionchange\",\n      R = \"draw.modechange\",\n      B = \"draw.actionable\",\n      V = \"draw.render\",\n      J = \"draw.combine\",\n      G = \"draw.uncombine\",\n      z = \"move\",\n      $ = \"change_coordinates\",\n      W = \"feature\",\n      q = \"midpoint\",\n      Y = \"vertex\",\n      Z = \"true\",\n      K = \"false\",\n      X = [\"scrollZoom\", \"boxZoom\", \"dragRotate\", \"dragPan\", \"keyboard\", \"doubleClickZoom\", \"touchZoomRotate\"],\n      H = {\n    Point: 0,\n    LineString: 1,\n    Polygon: 2\n  };\n\n  function Q(t, e) {\n    var n = H[t.geometry.type] - H[e.geometry.type];\n    return 0 === n && t.geometry.type === w ? t.area - e.area : n;\n  }\n\n  function tt(t) {\n    if (this._items = {}, this._nums = {}, this._length = t ? t.length : 0, t) for (var e = 0, n = t.length; e < n; e++) this.add(t[e]), void 0 !== t[e] && (\"string\" == typeof t[e] ? this._items[t[e]] = e : this._nums[t[e]] = e);\n  }\n\n  tt.prototype.add = function (t) {\n    return this.has(t) || (this._length++, \"string\" == typeof t ? this._items[t] = this._length : this._nums[t] = this._length), this;\n  }, tt.prototype.delete = function (t) {\n    return !1 === this.has(t) || (this._length--, delete this._items[t], delete this._nums[t]), this;\n  }, tt.prototype.has = function (t) {\n    return (\"string\" == typeof t || \"number\" == typeof t) && (void 0 !== this._items[t] || void 0 !== this._nums[t]);\n  }, tt.prototype.values = function () {\n    var t = this,\n        e = [];\n    return Object.keys(this._items).forEach(function (n) {\n      e.push({\n        k: n,\n        v: t._items[n]\n      });\n    }), Object.keys(this._nums).forEach(function (n) {\n      e.push({\n        k: JSON.parse(n),\n        v: t._nums[n]\n      });\n    }), e.sort(function (t, e) {\n      return t.v - e.v;\n    }).map(function (t) {\n      return t.k;\n    });\n  }, tt.prototype.clear = function () {\n    return this._length = 0, this._items = {}, this._nums = {}, this;\n  };\n  var et = [W, q, Y],\n      nt = {\n    click: function (t, e, n) {\n      return ot(t, e, n, n.options.clickBuffer);\n    },\n    touch: function (t, e, n) {\n      return ot(t, e, n, n.options.touchBuffer);\n    }\n  };\n\n  function ot(t, e, n, o) {\n    if (null === n.map) return [];\n    var r = t ? function (t, e) {\n      return void 0 === e && (e = 0), [[t.point.x - e, t.point.y - e], [t.point.x + e, t.point.y + e]];\n    }(t, o) : e,\n        a = {};\n    n.options.styles && (a.layers = n.options.styles.map(function (t) {\n      return t.id;\n    }));\n    var s = n.map.queryRenderedFeatures(r, a).filter(function (t) {\n      return -1 !== et.indexOf(t.properties.meta);\n    }),\n        u = new tt(),\n        c = [];\n    return s.forEach(function (t) {\n      var e = t.properties.id;\n      u.has(e) || (u.add(e), c.push(t));\n    }), function (t) {\n      return t.map(function (t) {\n        return t.geometry.type === w && (t.area = i.geometry({\n          type: M,\n          property: {},\n          geometry: t.geometry\n        })), t;\n      }).sort(Q).map(function (t) {\n        return delete t.area, t;\n      });\n    }(c);\n  }\n\n  function rt(t, e) {\n    var n = nt.click(t, null, e),\n        o = {\n      mouse: C\n    };\n    return n[0] && (o.mouse = n[0].properties.active === Z ? _ : x, o.feature = n[0].properties.meta), -1 !== e.events.currentModeName().indexOf(\"draw\") && (o.mouse = b), e.ui.queueMapClasses(o), e.ui.updateMapClasses(), n[0];\n  }\n\n  function it(t, e) {\n    var n = t.x - e.x,\n        o = t.y - e.y;\n    return Math.sqrt(n * n + o * o);\n  }\n\n  function at(t, e, n) {\n    void 0 === n && (n = {});\n    var o = null != n.fineTolerance ? n.fineTolerance : 4,\n        r = null != n.grossTolerance ? n.grossTolerance : 12,\n        i = null != n.interval ? n.interval : 500;\n    t.point = t.point || e.point, t.time = t.time || e.time;\n    var a = it(t.point, e.point);\n    return a < o || a < r && e.time - t.time < i;\n  }\n\n  function st(t, e, n) {\n    void 0 === n && (n = {});\n    var o = null != n.tolerance ? n.tolerance : 25,\n        r = null != n.interval ? n.interval : 250;\n    return t.point = t.point || e.point, t.time = t.time || e.time, it(t.point, e.point) < o && e.time - t.time < r;\n  }\n\n  function ut(t, e) {\n    return t(e = {\n      exports: {}\n    }, e.exports), e.exports;\n  }\n\n  var ct = ut(function (t) {\n    var e = t.exports = function (t, n) {\n      if (n || (n = 16), void 0 === t && (t = 128), t <= 0) return \"0\";\n\n      for (var o = Math.log(Math.pow(2, t)) / Math.log(n), r = 2; o === 1 / 0; r *= 2) o = Math.log(Math.pow(2, t / r)) / Math.log(n) * r;\n\n      var i = o - Math.floor(o),\n          a = \"\";\n\n      for (r = 0; r < Math.floor(o); r++) {\n        a = Math.floor(Math.random() * n).toString(n) + a;\n      }\n\n      if (i) {\n        var s = Math.pow(n, i);\n        a = Math.floor(Math.random() * s).toString(n) + a;\n      }\n\n      var u = parseInt(a, n);\n      return u !== 1 / 0 && u >= Math.pow(2, t) ? e(t, n) : a;\n    };\n\n    e.rack = function (t, n, o) {\n      var r = function (r) {\n        var a = 0;\n\n        do {\n          if (a++ > 10) {\n            if (!o) throw new Error(\"too many ID collisions, use more bits\");\n            t += o;\n          }\n\n          var s = e(t, n);\n        } while (Object.hasOwnProperty.call(i, s));\n\n        return i[s] = r, s;\n      },\n          i = r.hats = {};\n\n      return r.get = function (t) {\n        return r.hats[t];\n      }, r.set = function (t, e) {\n        return r.hats[t] = e, r;\n      }, r.bits = t || 128, r.base = n || 16, r;\n    };\n  }),\n      lt = function (t, e) {\n    this.ctx = t, this.properties = e.properties || {}, this.coordinates = e.geometry.coordinates, this.id = e.id || ct(), this.type = e.geometry.type;\n  };\n\n  lt.prototype.changed = function () {\n    this.ctx.store.featureChanged(this.id);\n  }, lt.prototype.incomingCoords = function (t) {\n    this.setCoordinates(t);\n  }, lt.prototype.setCoordinates = function (t) {\n    this.coordinates = t, this.changed();\n  }, lt.prototype.getCoordinates = function () {\n    return JSON.parse(JSON.stringify(this.coordinates));\n  }, lt.prototype.setProperty = function (t, e) {\n    this.properties[t] = e;\n  }, lt.prototype.toGeoJSON = function () {\n    return JSON.parse(JSON.stringify({\n      id: this.id,\n      type: M,\n      properties: this.properties,\n      geometry: {\n        coordinates: this.getCoordinates(),\n        type: this.type\n      }\n    }));\n  }, lt.prototype.internal = function (t) {\n    var e = {\n      id: this.id,\n      meta: W,\n      \"meta:type\": this.type,\n      active: K,\n      mode: t\n    };\n    if (this.ctx.options.userProperties) for (var n in this.properties) e[\"user_\" + n] = this.properties[n];\n    return {\n      type: M,\n      properties: e,\n      geometry: {\n        coordinates: this.getCoordinates(),\n        type: this.type\n      }\n    };\n  };\n\n  var dt = function (t, e) {\n    lt.call(this, t, e);\n  };\n\n  (dt.prototype = Object.create(lt.prototype)).isValid = function () {\n    return \"number\" == typeof this.coordinates[0] && \"number\" == typeof this.coordinates[1];\n  }, dt.prototype.updateCoordinate = function (t, e, n) {\n    this.coordinates = 3 === arguments.length ? [e, n] : [t, e], this.changed();\n  }, dt.prototype.getCoordinate = function () {\n    return this.getCoordinates();\n  };\n\n  var pt = function (t, e) {\n    lt.call(this, t, e);\n  };\n\n  (pt.prototype = Object.create(lt.prototype)).isValid = function () {\n    return this.coordinates.length > 1;\n  }, pt.prototype.addCoordinate = function (t, e, n) {\n    this.changed();\n    var o = parseInt(t, 10);\n    this.coordinates.splice(o, 0, [e, n]);\n  }, pt.prototype.getCoordinate = function (t) {\n    var e = parseInt(t, 10);\n    return JSON.parse(JSON.stringify(this.coordinates[e]));\n  }, pt.prototype.removeCoordinate = function (t) {\n    this.changed(), this.coordinates.splice(parseInt(t, 10), 1);\n  }, pt.prototype.updateCoordinate = function (t, e, n) {\n    var o = parseInt(t, 10);\n    this.coordinates[o] = [e, n], this.changed();\n  };\n\n  var ft = function (t, e) {\n    lt.call(this, t, e), this.coordinates = this.coordinates.map(function (t) {\n      return t.slice(0, -1);\n    });\n  };\n\n  (ft.prototype = Object.create(lt.prototype)).isValid = function () {\n    return 0 !== this.coordinates.length && this.coordinates.every(function (t) {\n      return t.length > 2;\n    });\n  }, ft.prototype.incomingCoords = function (t) {\n    this.coordinates = t.map(function (t) {\n      return t.slice(0, -1);\n    }), this.changed();\n  }, ft.prototype.setCoordinates = function (t) {\n    this.coordinates = t, this.changed();\n  }, ft.prototype.addCoordinate = function (t, e, n) {\n    this.changed();\n    var o = t.split(\".\").map(function (t) {\n      return parseInt(t, 10);\n    });\n    this.coordinates[o[0]].splice(o[1], 0, [e, n]);\n  }, ft.prototype.removeCoordinate = function (t) {\n    this.changed();\n    var e = t.split(\".\").map(function (t) {\n      return parseInt(t, 10);\n    }),\n        n = this.coordinates[e[0]];\n    n && (n.splice(e[1], 1), n.length < 3 && this.coordinates.splice(e[0], 1));\n  }, ft.prototype.getCoordinate = function (t) {\n    var e = t.split(\".\").map(function (t) {\n      return parseInt(t, 10);\n    }),\n        n = this.coordinates[e[0]];\n    return JSON.parse(JSON.stringify(n[e[1]]));\n  }, ft.prototype.getCoordinates = function () {\n    return this.coordinates.map(function (t) {\n      return t.concat([t[0]]);\n    });\n  }, ft.prototype.updateCoordinate = function (t, e, n) {\n    this.changed();\n    var o = t.split(\".\"),\n        r = parseInt(o[0], 10),\n        i = parseInt(o[1], 10);\n    void 0 === this.coordinates[r] && (this.coordinates[r] = []), this.coordinates[r][i] = [e, n];\n  };\n\n  var ht = {\n    MultiPoint: dt,\n    MultiLineString: pt,\n    MultiPolygon: ft\n  },\n      gt = function (t, e, n, o, r) {\n    var i = n.split(\".\"),\n        a = parseInt(i[0], 10),\n        s = i[1] ? i.slice(1).join(\".\") : null;\n    return t[a][e](s, o, r);\n  },\n      yt = function (t, e) {\n    if (lt.call(this, t, e), delete this.coordinates, this.model = ht[e.geometry.type], void 0 === this.model) throw new TypeError(e.geometry.type + \" is not a valid type\");\n    this.features = this._coordinatesToFeatures(e.geometry.coordinates);\n  };\n\n  function vt(t) {\n    this.map = t.map, this.drawConfig = JSON.parse(JSON.stringify(t.options || {})), this._ctx = t;\n  }\n\n  (yt.prototype = Object.create(lt.prototype))._coordinatesToFeatures = function (t) {\n    var e = this,\n        n = this.model.bind(this);\n    return t.map(function (t) {\n      return new n(e.ctx, {\n        id: ct(),\n        type: M,\n        properties: {},\n        geometry: {\n          coordinates: t,\n          type: e.type.replace(\"Multi\", \"\")\n        }\n      });\n    });\n  }, yt.prototype.isValid = function () {\n    return this.features.every(function (t) {\n      return t.isValid();\n    });\n  }, yt.prototype.setCoordinates = function (t) {\n    this.features = this._coordinatesToFeatures(t), this.changed();\n  }, yt.prototype.getCoordinate = function (t) {\n    return gt(this.features, \"getCoordinate\", t);\n  }, yt.prototype.getCoordinates = function () {\n    return JSON.parse(JSON.stringify(this.features.map(function (t) {\n      return t.type === w ? t.getCoordinates() : t.coordinates;\n    })));\n  }, yt.prototype.updateCoordinate = function (t, e, n) {\n    gt(this.features, \"updateCoordinate\", t, e, n), this.changed();\n  }, yt.prototype.addCoordinate = function (t, e, n) {\n    gt(this.features, \"addCoordinate\", t, e, n), this.changed();\n  }, yt.prototype.removeCoordinate = function (t) {\n    gt(this.features, \"removeCoordinate\", t), this.changed();\n  }, yt.prototype.getFeatures = function () {\n    return this.features;\n  }, vt.prototype.setSelected = function (t) {\n    return this._ctx.store.setSelected(t);\n  }, vt.prototype.setSelectedCoordinates = function (t) {\n    var e = this;\n    this._ctx.store.setSelectedCoordinates(t), t.reduce(function (t, n) {\n      return void 0 === t[n.feature_id] && (t[n.feature_id] = !0, e._ctx.store.get(n.feature_id).changed()), t;\n    }, {});\n  }, vt.prototype.getSelected = function () {\n    return this._ctx.store.getSelected();\n  }, vt.prototype.getSelectedIds = function () {\n    return this._ctx.store.getSelectedIds();\n  }, vt.prototype.isSelected = function (t) {\n    return this._ctx.store.isSelected(t);\n  }, vt.prototype.getFeature = function (t) {\n    return this._ctx.store.get(t);\n  }, vt.prototype.select = function (t) {\n    return this._ctx.store.select(t);\n  }, vt.prototype.deselect = function (t) {\n    return this._ctx.store.deselect(t);\n  }, vt.prototype.deleteFeature = function (t, e) {\n    return void 0 === e && (e = {}), this._ctx.store.delete(t, e);\n  }, vt.prototype.addFeature = function (t) {\n    return this._ctx.store.add(t);\n  }, vt.prototype.clearSelectedFeatures = function () {\n    return this._ctx.store.clearSelected();\n  }, vt.prototype.clearSelectedCoordinates = function () {\n    return this._ctx.store.clearSelectedCoordinates();\n  }, vt.prototype.setActionableState = function (t) {\n    void 0 === t && (t = {});\n    var e = {\n      trash: t.trash || !1,\n      combineFeatures: t.combineFeatures || !1,\n      uncombineFeatures: t.uncombineFeatures || !1\n    };\n    return this._ctx.events.actionable(e);\n  }, vt.prototype.changeMode = function (t, e, n) {\n    return void 0 === e && (e = {}), void 0 === n && (n = {}), this._ctx.events.changeMode(t, e, n);\n  }, vt.prototype.updateUIClasses = function (t) {\n    return this._ctx.ui.queueMapClasses(t);\n  }, vt.prototype.activateUIButton = function (t) {\n    return this._ctx.ui.setActiveButton(t);\n  }, vt.prototype.featuresAt = function (t, e, n) {\n    if (void 0 === n && (n = \"click\"), \"click\" !== n && \"touch\" !== n) throw new Error(\"invalid buffer type\");\n    return nt[n](t, e, this._ctx);\n  }, vt.prototype.newFeature = function (t) {\n    var e = t.geometry.type;\n    return e === L ? new dt(this._ctx, t) : e === I ? new pt(this._ctx, t) : e === w ? new ft(this._ctx, t) : new yt(this._ctx, t);\n  }, vt.prototype.isInstanceOf = function (t, e) {\n    if (t === L) return e instanceof dt;\n    if (t === I) return e instanceof pt;\n    if (t === w) return e instanceof ft;\n    if (\"MultiFeature\" === t) return e instanceof yt;\n    throw new Error(\"Unknown feature class: \" + t);\n  }, vt.prototype.doRender = function (t) {\n    return this._ctx.store.featureChanged(t);\n  }, vt.prototype.onSetup = function () {}, vt.prototype.onDrag = function () {}, vt.prototype.onClick = function () {}, vt.prototype.onMouseMove = function () {}, vt.prototype.onMouseDown = function () {}, vt.prototype.onMouseUp = function () {}, vt.prototype.onMouseOut = function () {}, vt.prototype.onKeyUp = function () {}, vt.prototype.onKeyDown = function () {}, vt.prototype.onTouchStart = function () {}, vt.prototype.onTouchMove = function () {}, vt.prototype.onTouchEnd = function () {}, vt.prototype.onTap = function () {}, vt.prototype.onStop = function () {}, vt.prototype.onTrash = function () {}, vt.prototype.onCombineFeature = function () {}, vt.prototype.onUncombineFeature = function () {}, vt.prototype.toDisplayFeatures = function () {\n    throw new Error(\"You must overwrite toDisplayFeatures\");\n  };\n  var mt = {\n    drag: \"onDrag\",\n    click: \"onClick\",\n    mousemove: \"onMouseMove\",\n    mousedown: \"onMouseDown\",\n    mouseup: \"onMouseUp\",\n    mouseout: \"onMouseOut\",\n    keyup: \"onKeyUp\",\n    keydown: \"onKeyDown\",\n    touchstart: \"onTouchStart\",\n    touchmove: \"onTouchMove\",\n    touchend: \"onTouchEnd\",\n    tap: \"onTap\"\n  },\n      bt = Object.keys(mt);\n\n  function _t(t) {\n    var e = Object.keys(t);\n    return function (n, o) {\n      void 0 === o && (o = {});\n      var r = {},\n          i = e.reduce(function (e, n) {\n        return e[n] = t[n], e;\n      }, new vt(n));\n      return {\n        start: function () {\n          var e = this;\n          r = i.onSetup(o), bt.forEach(function (n) {\n            var o,\n                a = mt[n],\n                s = function () {\n              return !1;\n            };\n\n            t[a] && (s = function () {\n              return !0;\n            }), e.on(n, s, (o = a, function (t) {\n              return i[o](r, t);\n            }));\n          });\n        },\n        stop: function () {\n          i.onStop(r);\n        },\n        trash: function () {\n          i.onTrash(r);\n        },\n        combineFeatures: function () {\n          i.onCombineFeatures(r);\n        },\n        uncombineFeatures: function () {\n          i.onUncombineFeatures(r);\n        },\n        render: function (t, e) {\n          i.toDisplayFeatures(r, t, e);\n        }\n      };\n    };\n  }\n\n  function St(t) {\n    return [].concat(t).filter(function (t) {\n      return void 0 !== t;\n    });\n  }\n\n  function xt() {\n    var t = this;\n    if (!(t.ctx.map && void 0 !== t.ctx.map.getSource(v))) return u();\n    var e = t.ctx.events.currentModeName();\n    t.ctx.ui.queueMapClasses({\n      mode: e\n    });\n    var n = [],\n        o = [];\n    t.isDirty ? o = t.getAllIds() : (n = t.getChangedIds().filter(function (e) {\n      return void 0 !== t.get(e);\n    }), o = t.sources.hot.filter(function (e) {\n      return e.properties.id && -1 === n.indexOf(e.properties.id) && void 0 !== t.get(e.properties.id);\n    }).map(function (t) {\n      return t.properties.id;\n    })), t.sources.hot = [];\n    var r = t.sources.cold.length;\n    t.sources.cold = t.isDirty ? [] : t.sources.cold.filter(function (t) {\n      var e = t.properties.id || t.properties.parent;\n      return -1 === n.indexOf(e);\n    });\n    var i = r !== t.sources.cold.length || o.length > 0;\n\n    function a(n, o) {\n      var r = t.get(n).internal(e);\n      t.ctx.events.currentModeRender(r, function (e) {\n        t.sources[o].push(e);\n      });\n    }\n\n    if (n.forEach(function (t) {\n      return a(t, \"hot\");\n    }), o.forEach(function (t) {\n      return a(t, \"cold\");\n    }), i && t.ctx.map.getSource(m).setData({\n      type: P,\n      features: t.sources.cold\n    }), t.ctx.map.getSource(v).setData({\n      type: P,\n      features: t.sources.hot\n    }), t._emitSelectionChange && (t.ctx.map.fire(U, {\n      features: t.getSelected().map(function (t) {\n        return t.toGeoJSON();\n      }),\n      points: t.getSelectedCoordinates().map(function (t) {\n        return {\n          type: M,\n          properties: {},\n          geometry: {\n            type: L,\n            coordinates: t.coordinates\n          }\n        };\n      })\n    }), t._emitSelectionChange = !1), t._deletedFeaturesToEmit.length) {\n      var s = t._deletedFeaturesToEmit.map(function (t) {\n        return t.toGeoJSON();\n      });\n\n      t._deletedFeaturesToEmit = [], t.ctx.map.fire(D, {\n        features: s\n      });\n    }\n\n    function u() {\n      t.isDirty = !1, t.clearChangedIds();\n    }\n\n    u(), t.ctx.map.fire(V, {});\n  }\n\n  function Ct(t) {\n    var e,\n        n = this;\n    this._features = {}, this._featureIds = new tt(), this._selectedFeatureIds = new tt(), this._selectedCoordinates = [], this._changedFeatureIds = new tt(), this._deletedFeaturesToEmit = [], this._emitSelectionChange = !1, this._mapInitialConfig = {}, this.ctx = t, this.sources = {\n      hot: [],\n      cold: []\n    }, this.render = function () {\n      e || (e = requestAnimationFrame(function () {\n        e = null, xt.call(n);\n      }));\n    }, this.isDirty = !1;\n  }\n\n  function Et(t, e) {\n    var n = t._selectedCoordinates.filter(function (e) {\n      return t._selectedFeatureIds.has(e.feature_id);\n    });\n\n    t._selectedCoordinates.length === n.length || e.silent || (t._emitSelectionChange = !0), t._selectedCoordinates = n;\n  }\n\n  Ct.prototype.createRenderBatch = function () {\n    var t = this,\n        e = this.render,\n        n = 0;\n    return this.render = function () {\n      n++;\n    }, function () {\n      t.render = e, n > 0 && t.render();\n    };\n  }, Ct.prototype.setDirty = function () {\n    return this.isDirty = !0, this;\n  }, Ct.prototype.featureChanged = function (t) {\n    return this._changedFeatureIds.add(t), this;\n  }, Ct.prototype.getChangedIds = function () {\n    return this._changedFeatureIds.values();\n  }, Ct.prototype.clearChangedIds = function () {\n    return this._changedFeatureIds.clear(), this;\n  }, Ct.prototype.getAllIds = function () {\n    return this._featureIds.values();\n  }, Ct.prototype.add = function (t) {\n    return this.featureChanged(t.id), this._features[t.id] = t, this._featureIds.add(t.id), this;\n  }, Ct.prototype.delete = function (t, e) {\n    var n = this;\n    return void 0 === e && (e = {}), St(t).forEach(function (t) {\n      n._featureIds.has(t) && (n._featureIds.delete(t), n._selectedFeatureIds.delete(t), e.silent || -1 === n._deletedFeaturesToEmit.indexOf(n._features[t]) && n._deletedFeaturesToEmit.push(n._features[t]), delete n._features[t], n.isDirty = !0);\n    }), Et(this, e), this;\n  }, Ct.prototype.get = function (t) {\n    return this._features[t];\n  }, Ct.prototype.getAll = function () {\n    var t = this;\n    return Object.keys(this._features).map(function (e) {\n      return t._features[e];\n    });\n  }, Ct.prototype.select = function (t, e) {\n    var n = this;\n    return void 0 === e && (e = {}), St(t).forEach(function (t) {\n      n._selectedFeatureIds.has(t) || (n._selectedFeatureIds.add(t), n._changedFeatureIds.add(t), e.silent || (n._emitSelectionChange = !0));\n    }), this;\n  }, Ct.prototype.deselect = function (t, e) {\n    var n = this;\n    return void 0 === e && (e = {}), St(t).forEach(function (t) {\n      n._selectedFeatureIds.has(t) && (n._selectedFeatureIds.delete(t), n._changedFeatureIds.add(t), e.silent || (n._emitSelectionChange = !0));\n    }), Et(this, e), this;\n  }, Ct.prototype.clearSelected = function (t) {\n    return void 0 === t && (t = {}), this.deselect(this._selectedFeatureIds.values(), {\n      silent: t.silent\n    }), this;\n  }, Ct.prototype.setSelected = function (t, e) {\n    var n = this;\n    return void 0 === e && (e = {}), t = St(t), this.deselect(this._selectedFeatureIds.values().filter(function (e) {\n      return -1 === t.indexOf(e);\n    }), {\n      silent: e.silent\n    }), this.select(t.filter(function (t) {\n      return !n._selectedFeatureIds.has(t);\n    }), {\n      silent: e.silent\n    }), this;\n  }, Ct.prototype.setSelectedCoordinates = function (t) {\n    return this._selectedCoordinates = t, this._emitSelectionChange = !0, this;\n  }, Ct.prototype.clearSelectedCoordinates = function () {\n    return this._selectedCoordinates = [], this._emitSelectionChange = !0, this;\n  }, Ct.prototype.getSelectedIds = function () {\n    return this._selectedFeatureIds.values();\n  }, Ct.prototype.getSelected = function () {\n    var t = this;\n    return this._selectedFeatureIds.values().map(function (e) {\n      return t.get(e);\n    });\n  }, Ct.prototype.getSelectedCoordinates = function () {\n    var t = this;\n    return this._selectedCoordinates.map(function (e) {\n      return {\n        coordinates: t.get(e.feature_id).getCoordinate(e.coord_path)\n      };\n    });\n  }, Ct.prototype.isSelected = function (t) {\n    return this._selectedFeatureIds.has(t);\n  }, Ct.prototype.setFeatureProperty = function (t, e, n) {\n    this.get(t).setProperty(e, n), this.featureChanged(t);\n  }, Ct.prototype.storeMapConfig = function () {\n    var t = this;\n    X.forEach(function (e) {\n      t.ctx.map[e] && (t._mapInitialConfig[e] = t.ctx.map[e].isEnabled());\n    });\n  }, Ct.prototype.restoreMapConfig = function () {\n    var t = this;\n    Object.keys(this._mapInitialConfig).forEach(function (e) {\n      t._mapInitialConfig[e] ? t.ctx.map[e].enable() : t.ctx.map[e].disable();\n    });\n  }, Ct.prototype.getInitialConfigValue = function (t) {\n    return void 0 === this._mapInitialConfig[t] || this._mapInitialConfig[t];\n  };\n\n  var Mt = function () {\n    for (var t = arguments, e = {}, n = 0; n < arguments.length; n++) {\n      var o = t[n];\n\n      for (var r in o) wt.call(o, r) && (e[r] = o[r]);\n    }\n\n    return e;\n  },\n      wt = Object.prototype.hasOwnProperty;\n\n  var It = [\"mode\", \"feature\", \"mouse\"];\n\n  function Lt(e) {\n    var n = null,\n        o = null,\n        r = {\n      onRemove: function () {\n        return e.map.off(\"load\", r.connect), clearInterval(o), r.removeLayers(), e.store.restoreMapConfig(), e.ui.removeButtons(), e.events.removeEventListeners(), e.ui.clearMapClasses(), e.map = null, e.container = null, e.store = null, n && n.parentNode && n.parentNode.removeChild(n), n = null, this;\n      },\n      connect: function () {\n        e.map.off(\"load\", r.connect), clearInterval(o), r.addLayers(), e.store.storeMapConfig(), e.events.addEventListeners();\n      },\n      onAdd: function (i) {\n        var y = i.fire;\n        return i.fire = function (t, e) {\n          var n = arguments;\n          return 1 === y.length && 1 !== arguments.length && (n = [Mt({}, {\n            type: t\n          }, e)]), y.apply(i, n);\n        }, e.map = i, e.events = function (e) {\n          var n = Object.keys(e.options.modes).reduce(function (t, n) {\n            return t[n] = _t(e.options.modes[n]), t;\n          }, {}),\n              o = {},\n              r = {},\n              i = {},\n              a = null,\n              s = null;\n          i.drag = function (t, n) {\n            n({\n              point: t.point,\n              time: new Date().getTime()\n            }) ? (e.ui.queueMapClasses({\n              mouse: S\n            }), s.drag(t)) : t.originalEvent.stopPropagation();\n          }, i.mousedrag = function (t) {\n            i.drag(t, function (t) {\n              return !at(o, t);\n            });\n          }, i.touchdrag = function (t) {\n            i.drag(t, function (t) {\n              return !st(r, t);\n            });\n          }, i.mousemove = function (t) {\n            if (1 === (void 0 !== t.originalEvent.buttons ? t.originalEvent.buttons : t.originalEvent.which)) return i.mousedrag(t);\n            var n = rt(t, e);\n            t.featureTarget = n, s.mousemove(t);\n          }, i.mousedown = function (t) {\n            o = {\n              time: new Date().getTime(),\n              point: t.point\n            };\n            var n = rt(t, e);\n            t.featureTarget = n, s.mousedown(t);\n          }, i.mouseup = function (t) {\n            var n = rt(t, e);\n            t.featureTarget = n, at(o, {\n              point: t.point,\n              time: new Date().getTime()\n            }) ? s.click(t) : s.mouseup(t);\n          }, i.mouseout = function (t) {\n            s.mouseout(t);\n          }, i.touchstart = function (t) {\n            if (t.originalEvent.preventDefault(), e.options.touchEnabled) {\n              r = {\n                time: new Date().getTime(),\n                point: t.point\n              };\n              var n = nt.touch(t, null, e)[0];\n              t.featureTarget = n, s.touchstart(t);\n            }\n          }, i.touchmove = function (t) {\n            if (t.originalEvent.preventDefault(), e.options.touchEnabled) return s.touchmove(t), i.touchdrag(t);\n          }, i.touchend = function (t) {\n            if (t.originalEvent.preventDefault(), e.options.touchEnabled) {\n              var n = nt.touch(t, null, e)[0];\n              t.featureTarget = n, st(r, {\n                time: new Date().getTime(),\n                point: t.point\n              }) ? s.tap(t) : s.touchend(t);\n            }\n          };\n\n          var u = function (t) {\n            return !(8 === t || 46 === t || t >= 48 && t <= 57);\n          };\n\n          function c(o, r, i) {\n            void 0 === i && (i = {}), s.stop();\n            var u = n[o];\n            if (void 0 === u) throw new Error(o + \" is not valid\");\n            a = o;\n            var c = u(e, r);\n            s = t(c, e), i.silent || e.map.fire(R, {\n              mode: o\n            }), e.store.setDirty(), e.store.render();\n          }\n\n          i.keydown = function (t) {\n            \"mapboxgl-canvas\" === (t.srcElement || t.target).classList[0] && (8 !== t.keyCode && 46 !== t.keyCode || !e.options.controls.trash ? u(t.keyCode) ? s.keydown(t) : 49 === t.keyCode && e.options.controls.point ? c(j.DRAW_POINT) : 50 === t.keyCode && e.options.controls.line_string ? c(j.DRAW_LINE_STRING) : 51 === t.keyCode && e.options.controls.polygon && c(j.DRAW_POLYGON) : (t.preventDefault(), s.trash()));\n          }, i.keyup = function (t) {\n            u(t.keyCode) && s.keyup(t);\n          }, i.zoomend = function () {\n            e.store.changeZoom();\n          }, i.data = function (t) {\n            if (\"style\" === t.dataType) {\n              var n = e.setup,\n                  o = e.map,\n                  r = e.options,\n                  i = e.store;\n              r.styles.some(function (t) {\n                return o.getLayer(t.id);\n              }) || (n.addLayers(), i.setDirty(), i.render());\n            }\n          };\n          var l = {\n            trash: !1,\n            combineFeatures: !1,\n            uncombineFeatures: !1\n          };\n          return {\n            start: function () {\n              a = e.options.defaultMode, s = t(n[a](e), e);\n            },\n            changeMode: c,\n            actionable: function (t) {\n              var n = !1;\n              Object.keys(t).forEach(function (e) {\n                if (void 0 === l[e]) throw new Error(\"Invalid action type\");\n                l[e] !== t[e] && (n = !0), l[e] = t[e];\n              }), n && e.map.fire(B, {\n                actions: l\n              });\n            },\n            currentModeName: function () {\n              return a;\n            },\n            currentModeRender: function (t, e) {\n              return s.render(t, e);\n            },\n            fire: function (t, e) {\n              i[t] && i[t](e);\n            },\n            addEventListeners: function () {\n              e.map.on(\"mousemove\", i.mousemove), e.map.on(\"mousedown\", i.mousedown), e.map.on(\"mouseup\", i.mouseup), e.map.on(\"data\", i.data), e.map.on(\"touchmove\", i.touchmove), e.map.on(\"touchstart\", i.touchstart), e.map.on(\"touchend\", i.touchend), e.container.addEventListener(\"mouseout\", i.mouseout), e.options.keybindings && (e.container.addEventListener(\"keydown\", i.keydown), e.container.addEventListener(\"keyup\", i.keyup));\n            },\n            removeEventListeners: function () {\n              e.map.off(\"mousemove\", i.mousemove), e.map.off(\"mousedown\", i.mousedown), e.map.off(\"mouseup\", i.mouseup), e.map.off(\"data\", i.data), e.map.off(\"touchmove\", i.touchmove), e.map.off(\"touchstart\", i.touchstart), e.map.off(\"touchend\", i.touchend), e.container.removeEventListener(\"mouseout\", i.mouseout), e.options.keybindings && (e.container.removeEventListener(\"keydown\", i.keydown), e.container.removeEventListener(\"keyup\", i.keyup));\n            },\n            trash: function (t) {\n              s.trash(t);\n            },\n            combineFeatures: function () {\n              s.combineFeatures();\n            },\n            uncombineFeatures: function () {\n              s.uncombineFeatures();\n            },\n            getMode: function () {\n              return a;\n            }\n          };\n        }(e), e.ui = function (t) {\n          var e = {},\n              n = null,\n              o = {\n            mode: null,\n            feature: null,\n            mouse: null\n          },\n              r = {\n            mode: null,\n            feature: null,\n            mouse: null\n          };\n\n          function i(t) {\n            r = Mt(r, t);\n          }\n\n          function y() {\n            var e, n;\n\n            if (t.container) {\n              var i = [],\n                  a = [];\n              It.forEach(function (t) {\n                r[t] !== o[t] && (i.push(t + \"-\" + o[t]), null !== r[t] && a.push(t + \"-\" + r[t]));\n              }), i.length > 0 && (e = t.container.classList).remove.apply(e, i), a.length > 0 && (n = t.container.classList).add.apply(n, a), o = Mt(o, r);\n            }\n          }\n\n          function v(t, e) {\n            void 0 === e && (e = {});\n            var o = document.createElement(\"button\");\n            return o.className = s + \" \" + e.className, o.setAttribute(\"title\", e.title), e.container.appendChild(o), o.addEventListener(\"click\", function (o) {\n              if (o.preventDefault(), o.stopPropagation(), o.target === n) return m(), void e.onDeactivate();\n              b(t), e.onActivate();\n            }, !0), o;\n          }\n\n          function m() {\n            n && (n.classList.remove(g), n = null);\n          }\n\n          function b(t) {\n            m();\n            var o = e[t];\n            o && o && \"trash\" !== t && (o.classList.add(g), n = o);\n          }\n\n          return {\n            setActiveButton: b,\n            queueMapClasses: i,\n            updateMapClasses: y,\n            clearMapClasses: function () {\n              i({\n                mode: null,\n                feature: null,\n                mouse: null\n              }), y();\n            },\n            addButtons: function () {\n              var n = t.options.controls,\n                  o = document.createElement(\"div\");\n              return o.className = h + \" \" + a, n ? (n[E.LINE] && (e[E.LINE] = v(E.LINE, {\n                container: o,\n                className: u,\n                title: \"LineString tool \" + (t.options.keybindings ? \"(l)\" : \"\"),\n                onActivate: function () {\n                  return t.events.changeMode(j.DRAW_LINE_STRING);\n                },\n                onDeactivate: function () {\n                  return t.events.trash();\n                }\n              })), n[E.POLYGON] && (e[E.POLYGON] = v(E.POLYGON, {\n                container: o,\n                className: c,\n                title: \"Polygon tool \" + (t.options.keybindings ? \"(p)\" : \"\"),\n                onActivate: function () {\n                  return t.events.changeMode(j.DRAW_POLYGON);\n                },\n                onDeactivate: function () {\n                  return t.events.trash();\n                }\n              })), n[E.POINT] && (e[E.POINT] = v(E.POINT, {\n                container: o,\n                className: l,\n                title: \"Marker tool \" + (t.options.keybindings ? \"(m)\" : \"\"),\n                onActivate: function () {\n                  return t.events.changeMode(j.DRAW_POINT);\n                },\n                onDeactivate: function () {\n                  return t.events.trash();\n                }\n              })), n.trash && (e.trash = v(\"trash\", {\n                container: o,\n                className: d,\n                title: \"Delete\",\n                onActivate: function () {\n                  t.events.trash();\n                }\n              })), n.combine_features && (e.combine_features = v(\"combineFeatures\", {\n                container: o,\n                className: p,\n                title: \"Combine\",\n                onActivate: function () {\n                  t.events.combineFeatures();\n                }\n              })), n.uncombine_features && (e.uncombine_features = v(\"uncombineFeatures\", {\n                container: o,\n                className: f,\n                title: \"Uncombine\",\n                onActivate: function () {\n                  t.events.uncombineFeatures();\n                }\n              })), o) : o;\n            },\n            removeButtons: function () {\n              Object.keys(e).forEach(function (t) {\n                var n = e[t];\n                n.parentNode && n.parentNode.removeChild(n), delete e[t];\n              });\n            }\n          };\n        }(e), e.container = i.getContainer(), e.store = new Ct(e), n = e.ui.addButtons(), e.options.boxSelect && (i.boxZoom.disable(), i.dragPan.disable(), i.dragPan.enable()), i.loaded() ? r.connect() : (i.on(\"load\", r.connect), o = setInterval(function () {\n          i.loaded() && r.connect();\n        }, 16)), e.events.start(), n;\n      },\n      addLayers: function () {\n        e.map.addSource(m, {\n          data: {\n            type: P,\n            features: []\n          },\n          type: \"geojson\"\n        }), e.map.addSource(v, {\n          data: {\n            type: P,\n            features: []\n          },\n          type: \"geojson\"\n        }), e.options.styles.forEach(function (t) {\n          e.map.addLayer(t);\n        }), e.store.setDirty(!0), e.store.render();\n      },\n      removeLayers: function () {\n        e.options.styles.forEach(function (t) {\n          e.map.getLayer(t.id) && e.map.removeLayer(t.id);\n        }), e.map.getSource(m) && e.map.removeSource(m), e.map.getSource(v) && e.map.removeSource(v);\n      }\n    };\n    return e.setup = r, r;\n  }\n\n  function Pt(t) {\n    return function (e) {\n      var n = e.featureTarget;\n      return !!n && !!n.properties && n.properties.meta === t;\n    };\n  }\n\n  function Ft(t) {\n    return !!t.featureTarget && !!t.featureTarget.properties && t.featureTarget.properties.active === Z && t.featureTarget.properties.meta === W;\n  }\n\n  function Ot(t) {\n    return !!t.featureTarget && !!t.featureTarget.properties && t.featureTarget.properties.active === K && t.featureTarget.properties.meta === W;\n  }\n\n  function kt(t) {\n    return void 0 === t.featureTarget;\n  }\n\n  function Tt(t) {\n    var e = t.featureTarget;\n    return !!e && !!e.properties && e.properties.meta === Y;\n  }\n\n  function jt(t) {\n    return !!t.originalEvent && !0 === t.originalEvent.shiftKey;\n  }\n\n  function At(t) {\n    return 27 === t.keyCode;\n  }\n\n  function Dt(t) {\n    return 13 === t.keyCode;\n  }\n\n  var Nt = Ut;\n\n  function Ut(t, e) {\n    this.x = t, this.y = e;\n  }\n\n  function Rt(t, e) {\n    var n = e.getBoundingClientRect();\n    return new Nt(t.clientX - n.left - (e.clientLeft || 0), t.clientY - n.top - (e.clientTop || 0));\n  }\n\n  function Bt(t, e, n, o) {\n    return {\n      type: M,\n      properties: {\n        meta: Y,\n        parent: t,\n        coord_path: n,\n        active: o ? Z : K\n      },\n      geometry: {\n        type: L,\n        coordinates: e\n      }\n    };\n  }\n\n  function Vt(t, e, n) {\n    void 0 === e && (e = {}), void 0 === n && (n = null);\n    var o,\n        r = t.geometry,\n        i = r.type,\n        a = r.coordinates,\n        s = t.properties && t.properties.id,\n        u = [];\n\n    function c(t, n) {\n      var o = \"\",\n          r = null;\n      t.forEach(function (t, i) {\n        var a = null != n ? n + \".\" + i : String(i),\n            c = Bt(s, t, a, l(a));\n\n        if (e.midpoints && r) {\n          var d = function (t, e, n) {\n            var o = e.geometry.coordinates,\n                r = n.geometry.coordinates;\n            if (o[1] > 85 || o[1] < -85 || r[1] > 85 || r[1] < -85) return null;\n            var i = {\n              lng: (o[0] + r[0]) / 2,\n              lat: (o[1] + r[1]) / 2\n            };\n            return {\n              type: M,\n              properties: {\n                meta: q,\n                parent: t,\n                lng: i.lng,\n                lat: i.lat,\n                coord_path: n.properties.coord_path\n              },\n              geometry: {\n                type: L,\n                coordinates: [i.lng, i.lat]\n              }\n            };\n          }(s, r, c);\n\n          d && u.push(d);\n        }\n\n        r = c;\n        var p = JSON.stringify(t);\n        o !== p && u.push(c), 0 === i && (o = p);\n      });\n    }\n\n    function l(t) {\n      return !!e.selectedPaths && -1 !== e.selectedPaths.indexOf(t);\n    }\n\n    return i === L ? u.push(Bt(s, a, n, l(n))) : i === w ? a.forEach(function (t, e) {\n      c(t, null !== n ? n + \".\" + e : String(e));\n    }) : i === I ? c(a, n) : 0 === i.indexOf(F) && (o = i.replace(F, \"\"), a.forEach(function (n, r) {\n      var i = {\n        type: M,\n        properties: t.properties,\n        geometry: {\n          type: o,\n          coordinates: n\n        }\n      };\n      u = u.concat(Vt(i, e, r));\n    })), u;\n  }\n\n  Ut.prototype = {\n    clone: function () {\n      return new Ut(this.x, this.y);\n    },\n    add: function (t) {\n      return this.clone()._add(t);\n    },\n    sub: function (t) {\n      return this.clone()._sub(t);\n    },\n    multByPoint: function (t) {\n      return this.clone()._multByPoint(t);\n    },\n    divByPoint: function (t) {\n      return this.clone()._divByPoint(t);\n    },\n    mult: function (t) {\n      return this.clone()._mult(t);\n    },\n    div: function (t) {\n      return this.clone()._div(t);\n    },\n    rotate: function (t) {\n      return this.clone()._rotate(t);\n    },\n    rotateAround: function (t, e) {\n      return this.clone()._rotateAround(t, e);\n    },\n    matMult: function (t) {\n      return this.clone()._matMult(t);\n    },\n    unit: function () {\n      return this.clone()._unit();\n    },\n    perp: function () {\n      return this.clone()._perp();\n    },\n    round: function () {\n      return this.clone()._round();\n    },\n    mag: function () {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n    equals: function (t) {\n      return this.x === t.x && this.y === t.y;\n    },\n    dist: function (t) {\n      return Math.sqrt(this.distSqr(t));\n    },\n    distSqr: function (t) {\n      var e = t.x - this.x,\n          n = t.y - this.y;\n      return e * e + n * n;\n    },\n    angle: function () {\n      return Math.atan2(this.y, this.x);\n    },\n    angleTo: function (t) {\n      return Math.atan2(this.y - t.y, this.x - t.x);\n    },\n    angleWith: function (t) {\n      return this.angleWithSep(t.x, t.y);\n    },\n    angleWithSep: function (t, e) {\n      return Math.atan2(this.x * e - this.y * t, this.x * t + this.y * e);\n    },\n    _matMult: function (t) {\n      var e = t[0] * this.x + t[1] * this.y,\n          n = t[2] * this.x + t[3] * this.y;\n      return this.x = e, this.y = n, this;\n    },\n    _add: function (t) {\n      return this.x += t.x, this.y += t.y, this;\n    },\n    _sub: function (t) {\n      return this.x -= t.x, this.y -= t.y, this;\n    },\n    _mult: function (t) {\n      return this.x *= t, this.y *= t, this;\n    },\n    _div: function (t) {\n      return this.x /= t, this.y /= t, this;\n    },\n    _multByPoint: function (t) {\n      return this.x *= t.x, this.y *= t.y, this;\n    },\n    _divByPoint: function (t) {\n      return this.x /= t.x, this.y /= t.y, this;\n    },\n    _unit: function () {\n      return this._div(this.mag()), this;\n    },\n    _perp: function () {\n      var t = this.y;\n      return this.y = this.x, this.x = -t, this;\n    },\n    _rotate: function (t) {\n      var e = Math.cos(t),\n          n = Math.sin(t),\n          o = e * this.x - n * this.y,\n          r = n * this.x + e * this.y;\n      return this.x = o, this.y = r, this;\n    },\n    _rotateAround: function (t, e) {\n      var n = Math.cos(t),\n          o = Math.sin(t),\n          r = e.x + n * (this.x - e.x) - o * (this.y - e.y),\n          i = e.y + o * (this.x - e.x) + n * (this.y - e.y);\n      return this.x = r, this.y = i, this;\n    },\n    _round: function () {\n      return this.x = Math.round(this.x), this.y = Math.round(this.y), this;\n    }\n  }, Ut.convert = function (t) {\n    return t instanceof Ut ? t : Array.isArray(t) ? new Ut(t[0], t[1]) : t;\n  };\n\n  var Jt = function (t) {\n    setTimeout(function () {\n      t.map && t.map.doubleClickZoom && t._ctx && t._ctx.store && t._ctx.store.getInitialConfigValue && t._ctx.store.getInitialConfigValue(\"doubleClickZoom\") && t.map.doubleClickZoom.enable();\n    }, 0);\n  },\n      Gt = function (t) {\n    setTimeout(function () {\n      t.map && t.map.doubleClickZoom && t.map.doubleClickZoom.disable();\n    }, 0);\n  },\n      zt = function (t) {\n    if (!t || !t.type) return null;\n    var e = $t[t.type];\n    if (!e) return null;\n    if (\"geometry\" === e) return {\n      type: \"FeatureCollection\",\n      features: [{\n        type: \"Feature\",\n        properties: {},\n        geometry: t\n      }]\n    };\n    if (\"feature\" === e) return {\n      type: \"FeatureCollection\",\n      features: [t]\n    };\n    if (\"featurecollection\" === e) return t;\n  },\n      $t = {\n    Point: \"geometry\",\n    MultiPoint: \"geometry\",\n    LineString: \"geometry\",\n    MultiLineString: \"geometry\",\n    Polygon: \"geometry\",\n    MultiPolygon: \"geometry\",\n    GeometryCollection: \"geometry\",\n    Feature: \"feature\",\n    FeatureCollection: \"featurecollection\"\n  };\n\n  function Wt(t) {\n    switch (t && t.type || null) {\n      case \"FeatureCollection\":\n        return t.features = t.features.reduce(function (t, e) {\n          return t.concat(Wt(e));\n        }, []), t;\n\n      case \"Feature\":\n        return t.geometry ? Wt(t.geometry).map(function (e) {\n          var n = {\n            type: \"Feature\",\n            properties: JSON.parse(JSON.stringify(t.properties)),\n            geometry: e\n          };\n          return void 0 !== t.id && (n.id = t.id), n;\n        }) : [t];\n\n      case \"MultiPoint\":\n        return t.coordinates.map(function (t) {\n          return {\n            type: \"Point\",\n            coordinates: t\n          };\n        });\n\n      case \"MultiPolygon\":\n        return t.coordinates.map(function (t) {\n          return {\n            type: \"Polygon\",\n            coordinates: t\n          };\n        });\n\n      case \"MultiLineString\":\n        return t.coordinates.map(function (t) {\n          return {\n            type: \"LineString\",\n            coordinates: t\n          };\n        });\n\n      case \"GeometryCollection\":\n        return t.geometries.map(Wt).reduce(function (t, e) {\n          return t.concat(e);\n        }, []);\n\n      case \"Point\":\n      case \"Polygon\":\n      case \"LineString\":\n        return [t];\n    }\n  }\n\n  var qt = function (t) {\n    if (!t) return [];\n    var e = Wt(zt(t)),\n        n = [];\n    return e.features.forEach(function (t) {\n      t.geometry && (n = n.concat(function t(e) {\n        return Array.isArray(e) && e.length && \"number\" == typeof e[0] ? [e] : e.reduce(function (e, n) {\n          return Array.isArray(n) && Array.isArray(n[0]) ? e.concat(t(n)) : (e.push(n), e);\n        }, []);\n      }(t.geometry.coordinates)));\n    }), n;\n  },\n      Yt = ut(function (t) {\n    var e = t.exports = function (t) {\n      return new n(t);\n    };\n\n    function n(t) {\n      this.value = t;\n    }\n\n    function o(t, e, n) {\n      var o = [],\n          a = [],\n          l = !0;\n      return function t(d) {\n        var p = n ? r(d) : d,\n            f = {},\n            h = !0,\n            g = {\n          node: p,\n          node_: d,\n          path: [].concat(o),\n          parent: a[a.length - 1],\n          parents: a,\n          key: o.slice(-1)[0],\n          isRoot: 0 === o.length,\n          level: o.length,\n          circular: null,\n          update: function (t, e) {\n            g.isRoot || (g.parent.node[g.key] = t), g.node = t, e && (h = !1);\n          },\n          delete: function (t) {\n            delete g.parent.node[g.key], t && (h = !1);\n          },\n          remove: function (t) {\n            s(g.parent.node) ? g.parent.node.splice(g.key, 1) : delete g.parent.node[g.key], t && (h = !1);\n          },\n          keys: null,\n          before: function (t) {\n            f.before = t;\n          },\n          after: function (t) {\n            f.after = t;\n          },\n          pre: function (t) {\n            f.pre = t;\n          },\n          post: function (t) {\n            f.post = t;\n          },\n          stop: function () {\n            l = !1;\n          },\n          block: function () {\n            h = !1;\n          }\n        };\n        if (!l) return g;\n\n        function y() {\n          if (\"object\" == typeof g.node && null !== g.node) {\n            g.keys && g.node_ === g.node || (g.keys = i(g.node)), g.isLeaf = 0 == g.keys.length;\n\n            for (var t = 0; t < a.length; t++) if (a[t].node_ === d) {\n              g.circular = a[t];\n              break;\n            }\n          } else g.isLeaf = !0, g.keys = null;\n\n          g.notLeaf = !g.isLeaf, g.notRoot = !g.isRoot;\n        }\n\n        y();\n        var v = e.call(g, g.node);\n        return void 0 !== v && g.update && g.update(v), f.before && f.before.call(g, g.node), h ? (\"object\" != typeof g.node || null === g.node || g.circular || (a.push(g), y(), u(g.keys, function (e, r) {\n          o.push(e), f.pre && f.pre.call(g, g.node[e], e);\n          var i = t(g.node[e]);\n          n && c.call(g.node, e) && (g.node[e] = i.node), i.isLast = r == g.keys.length - 1, i.isFirst = 0 == r, f.post && f.post.call(g, i), o.pop();\n        }), a.pop()), f.after && f.after.call(g, g.node), g) : g;\n      }(t).node;\n    }\n\n    function r(t) {\n      if (\"object\" == typeof t && null !== t) {\n        var e;\n        if (s(t)) e = [];else if (\"[object Date]\" === a(t)) e = new Date(t.getTime ? t.getTime() : t);else if (function (t) {\n          return \"[object RegExp]\" === a(t);\n        }(t)) e = new RegExp(t);else if (function (t) {\n          return \"[object Error]\" === a(t);\n        }(t)) e = {\n          message: t.message\n        };else if (function (t) {\n          return \"[object Boolean]\" === a(t);\n        }(t)) e = new Boolean(t);else if (function (t) {\n          return \"[object Number]\" === a(t);\n        }(t)) e = new Number(t);else if (function (t) {\n          return \"[object String]\" === a(t);\n        }(t)) e = new String(t);else if (Object.create && Object.getPrototypeOf) e = Object.create(Object.getPrototypeOf(t));else if (t.constructor === Object) e = {};else {\n          var n = t.constructor && t.constructor.prototype || t.__proto__ || {},\n              o = function () {};\n\n          o.prototype = n, e = new o();\n        }\n        return u(i(t), function (n) {\n          e[n] = t[n];\n        }), e;\n      }\n\n      return t;\n    }\n\n    n.prototype.get = function (t) {\n      for (var e = this.value, n = 0; n < t.length; n++) {\n        var o = t[n];\n\n        if (!e || !c.call(e, o)) {\n          e = void 0;\n          break;\n        }\n\n        e = e[o];\n      }\n\n      return e;\n    }, n.prototype.has = function (t) {\n      for (var e = this.value, n = 0; n < t.length; n++) {\n        var o = t[n];\n        if (!e || !c.call(e, o)) return !1;\n        e = e[o];\n      }\n\n      return !0;\n    }, n.prototype.set = function (t, e) {\n      for (var n = this.value, o = 0; o < t.length - 1; o++) {\n        var r = t[o];\n        c.call(n, r) || (n[r] = {}), n = n[r];\n      }\n\n      return n[t[o]] = e, e;\n    }, n.prototype.map = function (t) {\n      return o(this.value, t, !0);\n    }, n.prototype.forEach = function (t) {\n      return this.value = o(this.value, t, !1), this.value;\n    }, n.prototype.reduce = function (t, e) {\n      var n = 1 === arguments.length,\n          o = n ? this.value : e;\n      return this.forEach(function (e) {\n        this.isRoot && n || (o = t.call(this, o, e));\n      }), o;\n    }, n.prototype.paths = function () {\n      var t = [];\n      return this.forEach(function (e) {\n        t.push(this.path);\n      }), t;\n    }, n.prototype.nodes = function () {\n      var t = [];\n      return this.forEach(function (e) {\n        t.push(this.node);\n      }), t;\n    }, n.prototype.clone = function () {\n      var t = [],\n          e = [];\n      return function n(o) {\n        for (var a = 0; a < t.length; a++) if (t[a] === o) return e[a];\n\n        if (\"object\" == typeof o && null !== o) {\n          var s = r(o);\n          return t.push(o), e.push(s), u(i(o), function (t) {\n            s[t] = n(o[t]);\n          }), t.pop(), e.pop(), s;\n        }\n\n        return o;\n      }(this.value);\n    };\n\n    var i = Object.keys || function (t) {\n      var e = [];\n\n      for (var n in t) e.push(n);\n\n      return e;\n    };\n\n    function a(t) {\n      return Object.prototype.toString.call(t);\n    }\n\n    var s = Array.isArray || function (t) {\n      return \"[object Array]\" === Object.prototype.toString.call(t);\n    },\n        u = function (t, e) {\n      if (t.forEach) return t.forEach(e);\n\n      for (var n = 0; n < t.length; n++) e(t[n], n, t);\n    };\n\n    u(i(n.prototype), function (t) {\n      e[t] = function (e) {\n        var o = [].slice.call(arguments, 1),\n            r = new n(e);\n        return r[t].apply(r, o);\n      };\n    });\n\n    var c = Object.hasOwnProperty || function (t, e) {\n      return e in t;\n    };\n  }),\n      Zt = Kt;\n\n  function Kt(t) {\n    if (!(this instanceof Kt)) return new Kt(t);\n    this._bbox = t || [1 / 0, 1 / 0, -1 / 0, -1 / 0], this._valid = !!t;\n  }\n\n  Kt.prototype.include = function (t) {\n    return this._valid = !0, this._bbox[0] = Math.min(this._bbox[0], t[0]), this._bbox[1] = Math.min(this._bbox[1], t[1]), this._bbox[2] = Math.max(this._bbox[2], t[0]), this._bbox[3] = Math.max(this._bbox[3], t[1]), this;\n  }, Kt.prototype.equals = function (t) {\n    var e;\n    return e = t instanceof Kt ? t.bbox() : t, this._bbox[0] == e[0] && this._bbox[1] == e[1] && this._bbox[2] == e[2] && this._bbox[3] == e[3];\n  }, Kt.prototype.center = function (t) {\n    return this._valid ? [(this._bbox[0] + this._bbox[2]) / 2, (this._bbox[1] + this._bbox[3]) / 2] : null;\n  }, Kt.prototype.union = function (t) {\n    var e;\n    return this._valid = !0, e = t instanceof Kt ? t.bbox() : t, this._bbox[0] = Math.min(this._bbox[0], e[0]), this._bbox[1] = Math.min(this._bbox[1], e[1]), this._bbox[2] = Math.max(this._bbox[2], e[2]), this._bbox[3] = Math.max(this._bbox[3], e[3]), this;\n  }, Kt.prototype.bbox = function () {\n    return this._valid ? this._bbox : null;\n  }, Kt.prototype.contains = function (t) {\n    if (!t) return this._fastContains();\n    if (!this._valid) return null;\n    var e = t[0],\n        n = t[1];\n    return this._bbox[0] <= e && this._bbox[1] <= n && this._bbox[2] >= e && this._bbox[3] >= n;\n  }, Kt.prototype.intersect = function (t) {\n    return this._valid ? (e = t instanceof Kt ? t.bbox() : t, !(this._bbox[0] > e[2] || this._bbox[2] < e[0] || this._bbox[3] < e[1] || this._bbox[1] > e[3])) : null;\n    var e;\n  }, Kt.prototype._fastContains = function () {\n    if (!this._valid) return new Function(\"return null;\");\n    var t = \"return \" + this._bbox[0] + \"<= ll[0] &&\" + this._bbox[1] + \"<= ll[1] &&\" + this._bbox[2] + \">= ll[0] &&\" + this._bbox[3] + \">= ll[1]\";\n    return new Function(\"ll\", t);\n  }, Kt.prototype.polygon = function () {\n    return this._valid ? {\n      type: \"Polygon\",\n      coordinates: [[[this._bbox[0], this._bbox[1]], [this._bbox[2], this._bbox[1]], [this._bbox[2], this._bbox[3]], [this._bbox[0], this._bbox[3]], [this._bbox[0], this._bbox[1]]]]\n    } : null;\n  };\n\n  var Xt = {\n    features: [\"FeatureCollection\"],\n    coordinates: [\"Point\", \"MultiPoint\", \"LineString\", \"MultiLineString\", \"Polygon\", \"MultiPolygon\"],\n    geometry: [\"Feature\"],\n    geometries: [\"GeometryCollection\"]\n  },\n      Ht = Object.keys(Xt),\n      Qt = function (t) {\n    return te(t).bbox();\n  };\n\n  function te(t) {\n    for (var e = Zt(), n = qt(t), o = 0; o < n.length; o++) e.include(n[o]);\n\n    return e;\n  }\n\n  Qt.polygon = function (t) {\n    return te(t).polygon();\n  }, Qt.bboxify = function (t) {\n    return Yt(t).map(function (t) {\n      t && Ht.some(function (e) {\n        return !!t[e] && -1 !== Xt[e].indexOf(t.type);\n      }) && (t.bbox = te(t).bbox(), this.update(t));\n    });\n  };\n\n  function ee(t, e) {\n    var n = -90,\n        o = 90,\n        r = -90,\n        i = 90,\n        a = 270,\n        s = -270;\n    t.forEach(function (t) {\n      var e = Qt(t),\n          u = e[1],\n          c = e[3],\n          l = e[0],\n          d = e[2];\n      u > n && (n = u), c < o && (o = c), c > r && (r = c), u < i && (i = u), l < a && (a = l), d > s && (s = d);\n    });\n    var u = e;\n    return n + u.lat > 85 && (u.lat = 85 - n), r + u.lat > 90 && (u.lat = 90 - r), o + u.lat < -85 && (u.lat = -85 - o), i + u.lat < -90 && (u.lat = -90 - i), a + u.lng <= -270 && (u.lng += 360 * Math.ceil(Math.abs(u.lng) / 360)), s + u.lng >= 270 && (u.lng -= 360 * Math.ceil(Math.abs(u.lng) / 360)), u;\n  }\n\n  function ne(t, e) {\n    var n = ee(t.map(function (t) {\n      return t.toGeoJSON();\n    }), e);\n    t.forEach(function (t) {\n      var e,\n          o = t.getCoordinates(),\n          r = function (t) {\n        var e = {\n          lng: t[0] + n.lng,\n          lat: t[1] + n.lat\n        };\n        return [e.lng, e.lat];\n      },\n          i = function (t) {\n        return t.map(function (t) {\n          return r(t);\n        });\n      };\n\n      t.type === L ? e = r(o) : t.type === I || t.type === O ? e = o.map(r) : t.type === w || t.type === k ? e = o.map(i) : t.type === T && (e = o.map(function (t) {\n        return t.map(function (t) {\n          return i(t);\n        });\n      })), t.incomingCoords(e);\n    });\n  }\n\n  var oe = {\n    onSetup: function (t) {\n      var e = this,\n          n = {\n        dragMoveLocation: null,\n        boxSelectStartLocation: null,\n        boxSelectElement: void 0,\n        boxSelecting: !1,\n        canBoxSelect: !1,\n        dragMoving: !1,\n        canDragMove: !1,\n        initiallySelectedFeatureIds: t.featureIds || []\n      };\n      return this.setSelected(n.initiallySelectedFeatureIds.filter(function (t) {\n        return void 0 !== e.getFeature(t);\n      })), this.fireActionable(), this.setActionableState({\n        combineFeatures: !0,\n        uncombineFeatures: !0,\n        trash: !0\n      }), n;\n    },\n    fireUpdate: function () {\n      this.map.fire(N, {\n        action: z,\n        features: this.getSelected().map(function (t) {\n          return t.toGeoJSON();\n        })\n      });\n    },\n    fireActionable: function () {\n      var t = this,\n          e = this.getSelected(),\n          n = e.filter(function (e) {\n        return t.isInstanceOf(\"MultiFeature\", e);\n      }),\n          o = !1;\n\n      if (e.length > 1) {\n        o = !0;\n        var r = e[0].type.replace(\"Multi\", \"\");\n        e.forEach(function (t) {\n          t.type.replace(\"Multi\", \"\") !== r && (o = !1);\n        });\n      }\n\n      var i = n.length > 0,\n          a = e.length > 0;\n      this.setActionableState({\n        combineFeatures: o,\n        uncombineFeatures: i,\n        trash: a\n      });\n    },\n    getUniqueIds: function (t) {\n      return t.length ? t.map(function (t) {\n        return t.properties.id;\n      }).filter(function (t) {\n        return void 0 !== t;\n      }).reduce(function (t, e) {\n        return t.add(e), t;\n      }, new tt()).values() : [];\n    },\n    stopExtendedInteractions: function (t) {\n      t.boxSelectElement && (t.boxSelectElement.parentNode && t.boxSelectElement.parentNode.removeChild(t.boxSelectElement), t.boxSelectElement = null), this.map.dragPan.enable(), t.boxSelecting = !1, t.canBoxSelect = !1, t.dragMoving = !1, t.canDragMove = !1;\n    },\n    onStop: function () {\n      Jt(this);\n    },\n    onMouseMove: function (t) {\n      return this.stopExtendedInteractions(t), !0;\n    },\n    onMouseOut: function (t) {\n      return !t.dragMoving || this.fireUpdate();\n    }\n  };\n  oe.onTap = oe.onClick = function (t, e) {\n    return kt(e) ? this.clickAnywhere(t, e) : Pt(Y)(e) ? this.clickOnVertex(t, e) : function (t) {\n      return !!t.featureTarget && !!t.featureTarget.properties && t.featureTarget.properties.meta === W;\n    }(e) ? this.clickOnFeature(t, e) : void 0;\n  }, oe.clickAnywhere = function (t) {\n    var e = this,\n        n = this.getSelectedIds();\n    n.length && (this.clearSelectedFeatures(), n.forEach(function (t) {\n      return e.doRender(t);\n    })), Jt(this), this.stopExtendedInteractions(t);\n  }, oe.clickOnVertex = function (t, e) {\n    this.changeMode(j.DIRECT_SELECT, {\n      featureId: e.featureTarget.properties.parent,\n      coordPath: e.featureTarget.properties.coord_path,\n      startPos: e.lngLat\n    }), this.updateUIClasses({\n      mouse: _\n    });\n  }, oe.startOnActiveFeature = function (t, e) {\n    this.stopExtendedInteractions(t), this.map.dragPan.disable(), this.doRender(e.featureTarget.properties.id), t.canDragMove = !0, t.dragMoveLocation = e.lngLat;\n  }, oe.clickOnFeature = function (t, e) {\n    var n = this;\n    Gt(this), this.stopExtendedInteractions(t);\n    var o = jt(e),\n        r = this.getSelectedIds(),\n        i = e.featureTarget.properties.id,\n        a = this.isSelected(i);\n    if (!o && a && this.getFeature(i).type !== L) return this.changeMode(j.DIRECT_SELECT, {\n      featureId: i\n    });\n    a && o ? (this.deselect(i), this.updateUIClasses({\n      mouse: x\n    }), 1 === r.length && Jt(this)) : !a && o ? (this.select(i), this.updateUIClasses({\n      mouse: _\n    })) : a || o || (r.forEach(function (t) {\n      return n.doRender(t);\n    }), this.setSelected(i), this.updateUIClasses({\n      mouse: _\n    })), this.doRender(i);\n  }, oe.onMouseDown = function (t, e) {\n    return Ft(e) ? this.startOnActiveFeature(t, e) : this.drawConfig.boxSelect && function (t) {\n      return !!t.originalEvent && !!t.originalEvent.shiftKey && 0 === t.originalEvent.button;\n    }(e) ? this.startBoxSelect(t, e) : void 0;\n  }, oe.startBoxSelect = function (t, e) {\n    this.stopExtendedInteractions(t), this.map.dragPan.disable(), t.boxSelectStartLocation = Rt(e.originalEvent, this.map.getContainer()), t.canBoxSelect = !0;\n  }, oe.onTouchStart = function (t, e) {\n    if (Ft(e)) return this.startOnActiveFeature(t, e);\n  }, oe.onDrag = function (t, e) {\n    return t.canDragMove ? this.dragMove(t, e) : this.drawConfig.boxSelect && t.canBoxSelect ? this.whileBoxSelect(t, e) : void 0;\n  }, oe.whileBoxSelect = function (t, e) {\n    t.boxSelecting = !0, this.updateUIClasses({\n      mouse: b\n    }), t.boxSelectElement || (t.boxSelectElement = document.createElement(\"div\"), t.boxSelectElement.classList.add(y), this.map.getContainer().appendChild(t.boxSelectElement));\n    var n = Rt(e.originalEvent, this.map.getContainer()),\n        o = Math.min(t.boxSelectStartLocation.x, n.x),\n        r = Math.max(t.boxSelectStartLocation.x, n.x),\n        i = Math.min(t.boxSelectStartLocation.y, n.y),\n        a = Math.max(t.boxSelectStartLocation.y, n.y),\n        s = \"translate(\" + o + \"px, \" + i + \"px)\";\n    t.boxSelectElement.style.transform = s, t.boxSelectElement.style.WebkitTransform = s, t.boxSelectElement.style.width = r - o + \"px\", t.boxSelectElement.style.height = a - i + \"px\";\n  }, oe.dragMove = function (t, e) {\n    t.dragMoving = !0, e.originalEvent.stopPropagation();\n    var n = {\n      lng: e.lngLat.lng - t.dragMoveLocation.lng,\n      lat: e.lngLat.lat - t.dragMoveLocation.lat\n    };\n    ne(this.getSelected(), n), t.dragMoveLocation = e.lngLat;\n  }, oe.onMouseUp = function (t, e) {\n    var n = this;\n    if (t.dragMoving) this.fireUpdate();else if (t.boxSelecting) {\n      var o = [t.boxSelectStartLocation, Rt(e.originalEvent, this.map.getContainer())],\n          r = this.featuresAt(null, o, \"click\"),\n          i = this.getUniqueIds(r).filter(function (t) {\n        return !n.isSelected(t);\n      });\n      i.length && (this.select(i), i.forEach(function (t) {\n        return n.doRender(t);\n      }), this.updateUIClasses({\n        mouse: _\n      }));\n    }\n    this.stopExtendedInteractions(t);\n  }, oe.toDisplayFeatures = function (t, e, n) {\n    e.properties.active = this.isSelected(e.properties.id) ? Z : K, n(e), this.fireActionable(), e.properties.active === Z && e.geometry.type !== L && Vt(e).forEach(n);\n  }, oe.onTrash = function () {\n    this.deleteFeature(this.getSelectedIds()), this.fireActionable();\n  }, oe.onCombineFeatures = function () {\n    var t = this.getSelected();\n\n    if (!(0 === t.length || t.length < 2)) {\n      for (var e = [], n = [], o = t[0].type.replace(\"Multi\", \"\"), r = 0; r < t.length; r++) {\n        var i = t[r];\n        if (i.type.replace(\"Multi\", \"\") !== o) return;\n        i.type.includes(\"Multi\") ? i.getCoordinates().forEach(function (t) {\n          e.push(t);\n        }) : e.push(i.getCoordinates()), n.push(i.toGeoJSON());\n      }\n\n      if (n.length > 1) {\n        var a = this.newFeature({\n          type: M,\n          properties: n[0].properties,\n          geometry: {\n            type: \"Multi\" + o,\n            coordinates: e\n          }\n        });\n        this.addFeature(a), this.deleteFeature(this.getSelectedIds(), {\n          silent: !0\n        }), this.setSelected([a.id]), this.map.fire(J, {\n          createdFeatures: [a.toGeoJSON()],\n          deletedFeatures: n\n        });\n      }\n\n      this.fireActionable();\n    }\n  }, oe.onUncombineFeatures = function () {\n    var t = this,\n        e = this.getSelected();\n\n    if (0 !== e.length) {\n      for (var n = [], o = [], r = function (r) {\n        var i = e[r];\n        t.isInstanceOf(\"MultiFeature\", i) && (i.getFeatures().forEach(function (e) {\n          t.addFeature(e), e.properties = i.properties, n.push(e.toGeoJSON()), t.select([e.id]);\n        }), t.deleteFeature(i.id, {\n          silent: !0\n        }), o.push(i.toGeoJSON()));\n      }, i = 0; i < e.length; i++) r(i);\n\n      n.length > 1 && this.map.fire(G, {\n        createdFeatures: n,\n        deletedFeatures: o\n      }), this.fireActionable();\n    }\n  };\n  var re = Pt(Y),\n      ie = Pt(q),\n      ae = {\n    fireUpdate: function () {\n      this.map.fire(N, {\n        action: $,\n        features: this.getSelected().map(function (t) {\n          return t.toGeoJSON();\n        })\n      });\n    },\n    fireActionable: function (t) {\n      this.setActionableState({\n        combineFeatures: !1,\n        uncombineFeatures: !1,\n        trash: t.selectedCoordPaths.length > 0\n      });\n    },\n    startDragging: function (t, e) {\n      this.map.dragPan.disable(), t.canDragMove = !0, t.dragMoveLocation = e.lngLat;\n    },\n    stopDragging: function (t) {\n      this.map.dragPan.enable(), t.dragMoving = !1, t.canDragMove = !1, t.dragMoveLocation = null;\n    },\n    onVertex: function (t, e) {\n      this.startDragging(t, e);\n      var n = e.featureTarget.properties,\n          o = t.selectedCoordPaths.indexOf(n.coord_path);\n      jt(e) || -1 !== o ? jt(e) && -1 === o && t.selectedCoordPaths.push(n.coord_path) : t.selectedCoordPaths = [n.coord_path];\n      var r = this.pathsToCoordinates(t.featureId, t.selectedCoordPaths);\n      this.setSelectedCoordinates(r);\n    },\n    onMidpoint: function (t, e) {\n      this.startDragging(t, e);\n      var n = e.featureTarget.properties;\n      t.feature.addCoordinate(n.coord_path, n.lng, n.lat), this.fireUpdate(), t.selectedCoordPaths = [n.coord_path];\n    },\n    pathsToCoordinates: function (t, e) {\n      return e.map(function (e) {\n        return {\n          feature_id: t,\n          coord_path: e\n        };\n      });\n    },\n    onFeature: function (t, e) {\n      0 === t.selectedCoordPaths.length ? this.startDragging(t, e) : this.stopDragging(t);\n    },\n    dragFeature: function (t, e, n) {\n      ne(this.getSelected(), n), t.dragMoveLocation = e.lngLat;\n    },\n    dragVertex: function (t, e, n) {\n      for (var o = t.selectedCoordPaths.map(function (e) {\n        return t.feature.getCoordinate(e);\n      }), r = ee(o.map(function (t) {\n        return {\n          type: M,\n          properties: {},\n          geometry: {\n            type: L,\n            coordinates: t\n          }\n        };\n      }), n), i = 0; i < o.length; i++) {\n        var a = o[i];\n        t.feature.updateCoordinate(t.selectedCoordPaths[i], a[0] + r.lng, a[1] + r.lat);\n      }\n    },\n    clickNoTarget: function () {\n      this.changeMode(j.SIMPLE_SELECT);\n    },\n    clickInactive: function () {\n      this.changeMode(j.SIMPLE_SELECT);\n    },\n    clickActiveFeature: function (t) {\n      t.selectedCoordPaths = [], this.clearSelectedCoordinates(), t.feature.changed();\n    },\n    onSetup: function (t) {\n      var e = t.featureId,\n          n = this.getFeature(e);\n      if (!n) throw new Error(\"You must provide a featureId to enter direct_select mode\");\n      if (n.type === L) throw new TypeError(\"direct_select mode doesn't handle point features\");\n      var o = {\n        featureId: e,\n        feature: n,\n        dragMoveLocation: t.startPos || null,\n        dragMoving: !1,\n        canDragMove: !1,\n        selectedCoordPaths: t.coordPath ? [t.coordPath] : []\n      };\n      return this.setSelectedCoordinates(this.pathsToCoordinates(e, o.selectedCoordPaths)), this.setSelected(e), Gt(this), this.setActionableState({\n        trash: !0\n      }), o;\n    },\n    onStop: function () {\n      Jt(this), this.clearSelectedCoordinates();\n    },\n    toDisplayFeatures: function (t, e, n) {\n      t.featureId === e.properties.id ? (e.properties.active = Z, n(e), Vt(e, {\n        map: this.map,\n        midpoints: !0,\n        selectedPaths: t.selectedCoordPaths\n      }).forEach(n)) : (e.properties.active = K, n(e)), this.fireActionable(t);\n    },\n    onTrash: function (t) {\n      t.selectedCoordPaths.sort(function (t, e) {\n        return e.localeCompare(t, \"en\", {\n          numeric: !0\n        });\n      }).forEach(function (e) {\n        return t.feature.removeCoordinate(e);\n      }), this.fireUpdate(), t.selectedCoordPaths = [], this.clearSelectedCoordinates(), this.fireActionable(t), !1 === t.feature.isValid() && (this.deleteFeature([t.featureId]), this.changeMode(j.SIMPLE_SELECT, {}));\n    },\n    onMouseMove: function (t, e) {\n      var n = Ft(e),\n          o = re(e),\n          r = 0 === t.selectedCoordPaths.length;\n      return n && r || o && !r ? this.updateUIClasses({\n        mouse: _\n      }) : this.updateUIClasses({\n        mouse: C\n      }), this.stopDragging(t), !0;\n    },\n    onMouseOut: function (t) {\n      return t.dragMoving && this.fireUpdate(), !0;\n    }\n  };\n  ae.onTouchStart = ae.onMouseDown = function (t, e) {\n    return re(e) ? this.onVertex(t, e) : Ft(e) ? this.onFeature(t, e) : ie(e) ? this.onMidpoint(t, e) : void 0;\n  }, ae.onDrag = function (t, e) {\n    if (!0 === t.canDragMove) {\n      t.dragMoving = !0, e.originalEvent.stopPropagation();\n      var n = {\n        lng: e.lngLat.lng - t.dragMoveLocation.lng,\n        lat: e.lngLat.lat - t.dragMoveLocation.lat\n      };\n      t.selectedCoordPaths.length > 0 ? this.dragVertex(t, e, n) : this.dragFeature(t, e, n), t.dragMoveLocation = e.lngLat;\n    }\n  }, ae.onClick = function (t, e) {\n    return kt(e) ? this.clickNoTarget(t, e) : Ft(e) ? this.clickActiveFeature(t, e) : Ot(e) ? this.clickInactive(t, e) : void this.stopDragging(t);\n  }, ae.onTap = function (t, e) {\n    return kt(e) ? this.clickNoTarget(t, e) : Ft(e) ? this.clickActiveFeature(t, e) : Ot(e) ? this.clickInactive(t, e) : void 0;\n  }, ae.onTouchEnd = ae.onMouseUp = function (t) {\n    t.dragMoving && this.fireUpdate(), this.stopDragging(t);\n  };\n  var se = {};\n\n  function ue(t, e) {\n    return !!t.lngLat && t.lngLat.lng === e[0] && t.lngLat.lat === e[1];\n  }\n\n  se.onSetup = function () {\n    var t = this.newFeature({\n      type: M,\n      properties: {},\n      geometry: {\n        type: L,\n        coordinates: []\n      }\n    });\n    return this.addFeature(t), this.clearSelectedFeatures(), this.updateUIClasses({\n      mouse: b\n    }), this.activateUIButton(E.POINT), this.setActionableState({\n      trash: !0\n    }), {\n      point: t\n    };\n  }, se.stopDrawingAndRemove = function (t) {\n    this.deleteFeature([t.point.id], {\n      silent: !0\n    }), this.changeMode(j.SIMPLE_SELECT);\n  }, se.onTap = se.onClick = function (t, e) {\n    this.updateUIClasses({\n      mouse: _\n    }), t.point.updateCoordinate(\"\", e.lngLat.lng, e.lngLat.lat), this.map.fire(A, {\n      features: [t.point.toGeoJSON()]\n    }), this.changeMode(j.SIMPLE_SELECT, {\n      featureIds: [t.point.id]\n    });\n  }, se.onStop = function (t) {\n    this.activateUIButton(), t.point.getCoordinate().length || this.deleteFeature([t.point.id], {\n      silent: !0\n    });\n  }, se.toDisplayFeatures = function (t, e, n) {\n    var o = e.properties.id === t.point.id;\n    if (e.properties.active = o ? Z : K, !o) return n(e);\n  }, se.onTrash = se.stopDrawingAndRemove, se.onKeyUp = function (t, e) {\n    if (At(e) || Dt(e)) return this.stopDrawingAndRemove(t, e);\n  };\n  var ce = {\n    onSetup: function () {\n      var t = this.newFeature({\n        type: M,\n        properties: {},\n        geometry: {\n          type: w,\n          coordinates: [[]]\n        }\n      });\n      return this.addFeature(t), this.clearSelectedFeatures(), Gt(this), this.updateUIClasses({\n        mouse: b\n      }), this.activateUIButton(E.POLYGON), this.setActionableState({\n        trash: !0\n      }), {\n        polygon: t,\n        currentVertexPosition: 0\n      };\n    },\n    clickAnywhere: function (t, e) {\n      if (t.currentVertexPosition > 0 && ue(e, t.polygon.coordinates[0][t.currentVertexPosition - 1])) return this.changeMode(j.SIMPLE_SELECT, {\n        featureIds: [t.polygon.id]\n      });\n      this.updateUIClasses({\n        mouse: b\n      }), t.polygon.updateCoordinate(\"0.\" + t.currentVertexPosition, e.lngLat.lng, e.lngLat.lat), t.currentVertexPosition++, t.polygon.updateCoordinate(\"0.\" + t.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n    },\n    clickOnVertex: function (t) {\n      return this.changeMode(j.SIMPLE_SELECT, {\n        featureIds: [t.polygon.id]\n      });\n    },\n    onMouseMove: function (t, e) {\n      t.polygon.updateCoordinate(\"0.\" + t.currentVertexPosition, e.lngLat.lng, e.lngLat.lat), Tt(e) && this.updateUIClasses({\n        mouse: x\n      });\n    }\n  };\n  ce.onTap = ce.onClick = function (t, e) {\n    return Tt(e) ? this.clickOnVertex(t, e) : this.clickAnywhere(t, e);\n  }, ce.onKeyUp = function (t, e) {\n    At(e) ? (this.deleteFeature([t.polygon.id], {\n      silent: !0\n    }), this.changeMode(j.SIMPLE_SELECT)) : Dt(e) && this.changeMode(j.SIMPLE_SELECT, {\n      featureIds: [t.polygon.id]\n    });\n  }, ce.onStop = function (t) {\n    this.updateUIClasses({\n      mouse: C\n    }), Jt(this), this.activateUIButton(), void 0 !== this.getFeature(t.polygon.id) && (t.polygon.removeCoordinate(\"0.\" + t.currentVertexPosition), t.polygon.isValid() ? this.map.fire(A, {\n      features: [t.polygon.toGeoJSON()]\n    }) : (this.deleteFeature([t.polygon.id], {\n      silent: !0\n    }), this.changeMode(j.SIMPLE_SELECT, {}, {\n      silent: !0\n    })));\n  }, ce.toDisplayFeatures = function (t, e, n) {\n    var o = e.properties.id === t.polygon.id;\n    if (e.properties.active = o ? Z : K, !o) return n(e);\n\n    if (0 !== e.geometry.coordinates.length) {\n      var r = e.geometry.coordinates[0].length;\n\n      if (!(r < 3)) {\n        if (e.properties.meta = W, n(Bt(t.polygon.id, e.geometry.coordinates[0][0], \"0.0\", !1)), r > 3) {\n          var i = e.geometry.coordinates[0].length - 3;\n          n(Bt(t.polygon.id, e.geometry.coordinates[0][i], \"0.\" + i, !1));\n        }\n\n        if (r <= 4) {\n          var a = [[e.geometry.coordinates[0][0][0], e.geometry.coordinates[0][0][1]], [e.geometry.coordinates[0][1][0], e.geometry.coordinates[0][1][1]]];\n          if (n({\n            type: M,\n            properties: e.properties,\n            geometry: {\n              coordinates: a,\n              type: I\n            }\n          }), 3 === r) return;\n        }\n\n        return n(e);\n      }\n    }\n  }, ce.onTrash = function (t) {\n    this.deleteFeature([t.polygon.id], {\n      silent: !0\n    }), this.changeMode(j.SIMPLE_SELECT);\n  };\n  var le = {\n    onSetup: function (t) {\n      var e,\n          n,\n          o = (t = t || {}).featureId,\n          r = \"forward\";\n\n      if (o) {\n        if (!(e = this.getFeature(o))) throw new Error(\"Could not find a feature with the provided featureId\");\n        var i = t.from;\n        if (i && \"Feature\" === i.type && i.geometry && \"Point\" === i.geometry.type && (i = i.geometry), i && \"Point\" === i.type && i.coordinates && 2 === i.coordinates.length && (i = i.coordinates), !i || !Array.isArray(i)) throw new Error(\"Please use the `from` property to indicate which point to continue the line from\");\n        var a = e.coordinates.length - 1;\n        if (e.coordinates[a][0] === i[0] && e.coordinates[a][1] === i[1]) n = a + 1, e.addCoordinate.apply(e, [n].concat(e.coordinates[a]));else {\n          if (e.coordinates[0][0] !== i[0] || e.coordinates[0][1] !== i[1]) throw new Error(\"`from` should match the point at either the start or the end of the provided LineString\");\n          r = \"backwards\", n = 0, e.addCoordinate.apply(e, [n].concat(e.coordinates[0]));\n        }\n      } else e = this.newFeature({\n        type: M,\n        properties: {},\n        geometry: {\n          type: I,\n          coordinates: []\n        }\n      }), n = 0, this.addFeature(e);\n\n      return this.clearSelectedFeatures(), Gt(this), this.updateUIClasses({\n        mouse: b\n      }), this.activateUIButton(E.LINE), this.setActionableState({\n        trash: !0\n      }), {\n        line: e,\n        currentVertexPosition: n,\n        direction: r\n      };\n    },\n    clickAnywhere: function (t, e) {\n      if (t.currentVertexPosition > 0 && ue(e, t.line.coordinates[t.currentVertexPosition - 1]) || \"backwards\" === t.direction && ue(e, t.line.coordinates[t.currentVertexPosition + 1])) return this.changeMode(j.SIMPLE_SELECT, {\n        featureIds: [t.line.id]\n      });\n      this.updateUIClasses({\n        mouse: b\n      }), t.line.updateCoordinate(t.currentVertexPosition, e.lngLat.lng, e.lngLat.lat), \"forward\" === t.direction ? (t.currentVertexPosition++, t.line.updateCoordinate(t.currentVertexPosition, e.lngLat.lng, e.lngLat.lat)) : t.line.addCoordinate(0, e.lngLat.lng, e.lngLat.lat);\n    },\n    clickOnVertex: function (t) {\n      return this.changeMode(j.SIMPLE_SELECT, {\n        featureIds: [t.line.id]\n      });\n    },\n    onMouseMove: function (t, e) {\n      t.line.updateCoordinate(t.currentVertexPosition, e.lngLat.lng, e.lngLat.lat), Tt(e) && this.updateUIClasses({\n        mouse: x\n      });\n    }\n  };\n  le.onTap = le.onClick = function (t, e) {\n    if (Tt(e)) return this.clickOnVertex(t, e);\n    this.clickAnywhere(t, e);\n  }, le.onKeyUp = function (t, e) {\n    Dt(e) ? this.changeMode(j.SIMPLE_SELECT, {\n      featureIds: [t.line.id]\n    }) : At(e) && (this.deleteFeature([t.line.id], {\n      silent: !0\n    }), this.changeMode(j.SIMPLE_SELECT));\n  }, le.onStop = function (t) {\n    Jt(this), this.activateUIButton(), void 0 !== this.getFeature(t.line.id) && (t.line.removeCoordinate(\"\" + t.currentVertexPosition), t.line.isValid() ? this.map.fire(A, {\n      features: [t.line.toGeoJSON()]\n    }) : (this.deleteFeature([t.line.id], {\n      silent: !0\n    }), this.changeMode(j.SIMPLE_SELECT, {}, {\n      silent: !0\n    })));\n  }, le.onTrash = function (t) {\n    this.deleteFeature([t.line.id], {\n      silent: !0\n    }), this.changeMode(j.SIMPLE_SELECT);\n  }, le.toDisplayFeatures = function (t, e, n) {\n    var o = e.properties.id === t.line.id;\n    if (e.properties.active = o ? Z : K, !o) return n(e);\n    e.geometry.coordinates.length < 2 || (e.properties.meta = W, n(Bt(t.line.id, e.geometry.coordinates[\"forward\" === t.direction ? e.geometry.coordinates.length - 2 : 1], \"\" + (\"forward\" === t.direction ? e.geometry.coordinates.length - 2 : 1), !1)), n(e));\n  };\n  var de = {\n    simple_select: oe,\n    direct_select: ae,\n    draw_point: se,\n    draw_polygon: ce,\n    draw_line_string: le\n  },\n      pe = {\n    defaultMode: j.SIMPLE_SELECT,\n    keybindings: !0,\n    touchEnabled: !0,\n    clickBuffer: 2,\n    touchBuffer: 25,\n    boxSelect: !0,\n    displayControlsDefault: !0,\n    styles: [{\n      id: \"gl-draw-polygon-fill-inactive\",\n      type: \"fill\",\n      filter: [\"all\", [\"==\", \"active\", \"false\"], [\"==\", \"$type\", \"Polygon\"], [\"!=\", \"mode\", \"static\"]],\n      paint: {\n        \"fill-color\": \"#3bb2d0\",\n        \"fill-outline-color\": \"#3bb2d0\",\n        \"fill-opacity\": .1\n      }\n    }, {\n      id: \"gl-draw-polygon-fill-active\",\n      type: \"fill\",\n      filter: [\"all\", [\"==\", \"active\", \"true\"], [\"==\", \"$type\", \"Polygon\"]],\n      paint: {\n        \"fill-color\": \"#fbb03b\",\n        \"fill-outline-color\": \"#fbb03b\",\n        \"fill-opacity\": .1\n      }\n    }, {\n      id: \"gl-draw-polygon-midpoint\",\n      type: \"circle\",\n      filter: [\"all\", [\"==\", \"$type\", \"Point\"], [\"==\", \"meta\", \"midpoint\"]],\n      paint: {\n        \"circle-radius\": 3,\n        \"circle-color\": \"#fbb03b\"\n      }\n    }, {\n      id: \"gl-draw-polygon-stroke-inactive\",\n      type: \"line\",\n      filter: [\"all\", [\"==\", \"active\", \"false\"], [\"==\", \"$type\", \"Polygon\"], [\"!=\", \"mode\", \"static\"]],\n      layout: {\n        \"line-cap\": \"round\",\n        \"line-join\": \"round\"\n      },\n      paint: {\n        \"line-color\": \"#3bb2d0\",\n        \"line-width\": 2\n      }\n    }, {\n      id: \"gl-draw-polygon-stroke-active\",\n      type: \"line\",\n      filter: [\"all\", [\"==\", \"active\", \"true\"], [\"==\", \"$type\", \"Polygon\"]],\n      layout: {\n        \"line-cap\": \"round\",\n        \"line-join\": \"round\"\n      },\n      paint: {\n        \"line-color\": \"#fbb03b\",\n        \"line-dasharray\": [.2, 2],\n        \"line-width\": 2\n      }\n    }, {\n      id: \"gl-draw-line-inactive\",\n      type: \"line\",\n      filter: [\"all\", [\"==\", \"active\", \"false\"], [\"==\", \"$type\", \"LineString\"], [\"!=\", \"mode\", \"static\"]],\n      layout: {\n        \"line-cap\": \"round\",\n        \"line-join\": \"round\"\n      },\n      paint: {\n        \"line-color\": \"#3bb2d0\",\n        \"line-width\": 2\n      }\n    }, {\n      id: \"gl-draw-line-active\",\n      type: \"line\",\n      filter: [\"all\", [\"==\", \"$type\", \"LineString\"], [\"==\", \"active\", \"true\"]],\n      layout: {\n        \"line-cap\": \"round\",\n        \"line-join\": \"round\"\n      },\n      paint: {\n        \"line-color\": \"#fbb03b\",\n        \"line-dasharray\": [.2, 2],\n        \"line-width\": 2\n      }\n    }, {\n      id: \"gl-draw-polygon-and-line-vertex-stroke-inactive\",\n      type: \"circle\",\n      filter: [\"all\", [\"==\", \"meta\", \"vertex\"], [\"==\", \"$type\", \"Point\"], [\"!=\", \"mode\", \"static\"]],\n      paint: {\n        \"circle-radius\": 5,\n        \"circle-color\": \"#fff\"\n      }\n    }, {\n      id: \"gl-draw-polygon-and-line-vertex-inactive\",\n      type: \"circle\",\n      filter: [\"all\", [\"==\", \"meta\", \"vertex\"], [\"==\", \"$type\", \"Point\"], [\"!=\", \"mode\", \"static\"]],\n      paint: {\n        \"circle-radius\": 3,\n        \"circle-color\": \"#fbb03b\"\n      }\n    }, {\n      id: \"gl-draw-point-point-stroke-inactive\",\n      type: \"circle\",\n      filter: [\"all\", [\"==\", \"active\", \"false\"], [\"==\", \"$type\", \"Point\"], [\"==\", \"meta\", \"feature\"], [\"!=\", \"mode\", \"static\"]],\n      paint: {\n        \"circle-radius\": 5,\n        \"circle-opacity\": 1,\n        \"circle-color\": \"#fff\"\n      }\n    }, {\n      id: \"gl-draw-point-inactive\",\n      type: \"circle\",\n      filter: [\"all\", [\"==\", \"active\", \"false\"], [\"==\", \"$type\", \"Point\"], [\"==\", \"meta\", \"feature\"], [\"!=\", \"mode\", \"static\"]],\n      paint: {\n        \"circle-radius\": 3,\n        \"circle-color\": \"#3bb2d0\"\n      }\n    }, {\n      id: \"gl-draw-point-stroke-active\",\n      type: \"circle\",\n      filter: [\"all\", [\"==\", \"$type\", \"Point\"], [\"==\", \"active\", \"true\"], [\"!=\", \"meta\", \"midpoint\"]],\n      paint: {\n        \"circle-radius\": 7,\n        \"circle-color\": \"#fff\"\n      }\n    }, {\n      id: \"gl-draw-point-active\",\n      type: \"circle\",\n      filter: [\"all\", [\"==\", \"$type\", \"Point\"], [\"!=\", \"meta\", \"midpoint\"], [\"==\", \"active\", \"true\"]],\n      paint: {\n        \"circle-radius\": 5,\n        \"circle-color\": \"#fbb03b\"\n      }\n    }, {\n      id: \"gl-draw-polygon-fill-static\",\n      type: \"fill\",\n      filter: [\"all\", [\"==\", \"mode\", \"static\"], [\"==\", \"$type\", \"Polygon\"]],\n      paint: {\n        \"fill-color\": \"#404040\",\n        \"fill-outline-color\": \"#404040\",\n        \"fill-opacity\": .1\n      }\n    }, {\n      id: \"gl-draw-polygon-stroke-static\",\n      type: \"line\",\n      filter: [\"all\", [\"==\", \"mode\", \"static\"], [\"==\", \"$type\", \"Polygon\"]],\n      layout: {\n        \"line-cap\": \"round\",\n        \"line-join\": \"round\"\n      },\n      paint: {\n        \"line-color\": \"#404040\",\n        \"line-width\": 2\n      }\n    }, {\n      id: \"gl-draw-line-static\",\n      type: \"line\",\n      filter: [\"all\", [\"==\", \"mode\", \"static\"], [\"==\", \"$type\", \"LineString\"]],\n      layout: {\n        \"line-cap\": \"round\",\n        \"line-join\": \"round\"\n      },\n      paint: {\n        \"line-color\": \"#404040\",\n        \"line-width\": 2\n      }\n    }, {\n      id: \"gl-draw-point-static\",\n      type: \"circle\",\n      filter: [\"all\", [\"==\", \"mode\", \"static\"], [\"==\", \"$type\", \"Point\"]],\n      paint: {\n        \"circle-radius\": 5,\n        \"circle-color\": \"#404040\"\n      }\n    }],\n    modes: de,\n    controls: {},\n    userProperties: !1\n  },\n      fe = {\n    point: !0,\n    line_string: !0,\n    polygon: !0,\n    trash: !0,\n    combine_features: !0,\n    uncombine_features: !0\n  },\n      he = {\n    point: !1,\n    line_string: !1,\n    polygon: !1,\n    trash: !1,\n    combine_features: !1,\n    uncombine_features: !1\n  };\n\n  function ge(t, e) {\n    return t.map(function (t) {\n      return t.source ? t : Mt(t, {\n        id: t.id + \".\" + e,\n        source: \"hot\" === e ? v : m\n      });\n    });\n  }\n\n  var ye = ut(function (t, e) {\n    var n = \"[object Arguments]\",\n        o = \"[object Map]\",\n        r = \"[object Object]\",\n        i = \"[object Set]\",\n        a = /^\\[object .+?Constructor\\]$/,\n        s = /^(?:0|[1-9]\\d*)$/,\n        u = {};\n    u[\"[object Float32Array]\"] = u[\"[object Float64Array]\"] = u[\"[object Int8Array]\"] = u[\"[object Int16Array]\"] = u[\"[object Int32Array]\"] = u[\"[object Uint8Array]\"] = u[\"[object Uint8ClampedArray]\"] = u[\"[object Uint16Array]\"] = u[\"[object Uint32Array]\"] = !0, u[n] = u[\"[object Array]\"] = u[\"[object ArrayBuffer]\"] = u[\"[object Boolean]\"] = u[\"[object DataView]\"] = u[\"[object Date]\"] = u[\"[object Error]\"] = u[\"[object Function]\"] = u[o] = u[\"[object Number]\"] = u[r] = u[\"[object RegExp]\"] = u[i] = u[\"[object String]\"] = u[\"[object WeakMap]\"] = !1;\n\n    var c = \"object\" == typeof global && global && global.Object === Object && global,\n        l = \"object\" == typeof self && self && self.Object === Object && self,\n        d = c || l || Function(\"return this\")(),\n        p = e && !e.nodeType && e,\n        f = p && t && !t.nodeType && t,\n        h = f && f.exports === p,\n        g = h && c.process,\n        y = function () {\n      try {\n        return g && g.binding && g.binding(\"util\");\n      } catch (t) {}\n    }(),\n        v = y && y.isTypedArray;\n\n    function m(t, e) {\n      for (var n = -1, o = null == t ? 0 : t.length; ++n < o;) if (e(t[n], n, t)) return !0;\n\n      return !1;\n    }\n\n    function b(t) {\n      var e = -1,\n          n = Array(t.size);\n      return t.forEach(function (t, o) {\n        n[++e] = [o, t];\n      }), n;\n    }\n\n    function _(t) {\n      var e = -1,\n          n = Array(t.size);\n      return t.forEach(function (t) {\n        n[++e] = t;\n      }), n;\n    }\n\n    var S,\n        x,\n        C,\n        E = Array.prototype,\n        M = Function.prototype,\n        w = Object.prototype,\n        I = d[\"__core-js_shared__\"],\n        L = M.toString,\n        P = w.hasOwnProperty,\n        F = (S = /[^.]+$/.exec(I && I.keys && I.keys.IE_PROTO || \"\")) ? \"Symbol(src)_1.\" + S : \"\",\n        O = w.toString,\n        k = RegExp(\"^\" + L.call(P).replace(/[\\\\^$.*+?()[\\]{}|]/g, \"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, \"$1.*?\") + \"$\"),\n        T = h ? d.Buffer : void 0,\n        j = d.Symbol,\n        A = d.Uint8Array,\n        D = w.propertyIsEnumerable,\n        N = E.splice,\n        U = j ? j.toStringTag : void 0,\n        R = Object.getOwnPropertySymbols,\n        B = T ? T.isBuffer : void 0,\n        V = (x = Object.keys, C = Object, function (t) {\n      return x(C(t));\n    }),\n        J = yt(d, \"DataView\"),\n        G = yt(d, \"Map\"),\n        z = yt(d, \"Promise\"),\n        $ = yt(d, \"Set\"),\n        W = yt(d, \"WeakMap\"),\n        q = yt(Object, \"create\"),\n        Y = _t(J),\n        Z = _t(G),\n        K = _t(z),\n        X = _t($),\n        H = _t(W),\n        Q = j ? j.prototype : void 0,\n        tt = Q ? Q.valueOf : void 0;\n\n    function et(t) {\n      var e = -1,\n          n = null == t ? 0 : t.length;\n\n      for (this.clear(); ++e < n;) {\n        var o = t[e];\n        this.set(o[0], o[1]);\n      }\n    }\n\n    function nt(t) {\n      var e = -1,\n          n = null == t ? 0 : t.length;\n\n      for (this.clear(); ++e < n;) {\n        var o = t[e];\n        this.set(o[0], o[1]);\n      }\n    }\n\n    function ot(t) {\n      var e = -1,\n          n = null == t ? 0 : t.length;\n\n      for (this.clear(); ++e < n;) {\n        var o = t[e];\n        this.set(o[0], o[1]);\n      }\n    }\n\n    function rt(t) {\n      var e = -1,\n          n = null == t ? 0 : t.length;\n\n      for (this.__data__ = new ot(); ++e < n;) this.add(t[e]);\n    }\n\n    function it(t) {\n      var e = this.__data__ = new nt(t);\n      this.size = e.size;\n    }\n\n    function at(t, e) {\n      var n = Ct(t),\n          o = !n && xt(t),\n          r = !n && !o && Et(t),\n          i = !n && !o && !r && Pt(t),\n          a = n || o || r || i,\n          s = a ? function (t, e) {\n        for (var n = -1, o = Array(t); ++n < t;) o[n] = e(n);\n\n        return o;\n      }(t.length, String) : [],\n          u = s.length;\n\n      for (var c in t) !e && !P.call(t, c) || a && (\"length\" == c || r && (\"offset\" == c || \"parent\" == c) || i && (\"buffer\" == c || \"byteLength\" == c || \"byteOffset\" == c) || bt(c, u)) || s.push(c);\n\n      return s;\n    }\n\n    function st(t, e) {\n      for (var n = t.length; n--;) if (St(t[n][0], e)) return n;\n\n      return -1;\n    }\n\n    function ut(t) {\n      return null == t ? void 0 === t ? \"[object Undefined]\" : \"[object Null]\" : U && U in Object(t) ? function (t) {\n        var e = P.call(t, U),\n            n = t[U];\n\n        try {\n          t[U] = void 0;\n          var o = !0;\n        } catch (t) {}\n\n        var r = O.call(t);\n        o && (e ? t[U] = n : delete t[U]);\n        return r;\n      }(t) : function (t) {\n        return O.call(t);\n      }(t);\n    }\n\n    function ct(t) {\n      return Lt(t) && ut(t) == n;\n    }\n\n    function lt(t, e, a, s, u) {\n      return t === e || (null == t || null == e || !Lt(t) && !Lt(e) ? t != t && e != e : function (t, e, a, s, u, c) {\n        var l = Ct(t),\n            d = Ct(e),\n            p = l ? \"[object Array]\" : mt(t),\n            f = d ? \"[object Array]\" : mt(e),\n            h = (p = p == n ? r : p) == r,\n            g = (f = f == n ? r : f) == r,\n            y = p == f;\n\n        if (y && Et(t)) {\n          if (!Et(e)) return !1;\n          l = !0, h = !1;\n        }\n\n        if (y && !h) return c || (c = new it()), l || Pt(t) ? ft(t, e, a, s, u, c) : function (t, e, n, r, a, s, u) {\n          switch (n) {\n            case \"[object DataView]\":\n              if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset) return !1;\n              t = t.buffer, e = e.buffer;\n\n            case \"[object ArrayBuffer]\":\n              return !(t.byteLength != e.byteLength || !s(new A(t), new A(e)));\n\n            case \"[object Boolean]\":\n            case \"[object Date]\":\n            case \"[object Number]\":\n              return St(+t, +e);\n\n            case \"[object Error]\":\n              return t.name == e.name && t.message == e.message;\n\n            case \"[object RegExp]\":\n            case \"[object String]\":\n              return t == e + \"\";\n\n            case o:\n              var c = b;\n\n            case i:\n              var l = 1 & r;\n              if (c || (c = _), t.size != e.size && !l) return !1;\n              var d = u.get(t);\n              if (d) return d == e;\n              r |= 2, u.set(t, e);\n              var p = ft(c(t), c(e), r, a, s, u);\n              return u.delete(t), p;\n\n            case \"[object Symbol]\":\n              if (tt) return tt.call(t) == tt.call(e);\n          }\n\n          return !1;\n        }(t, e, p, a, s, u, c);\n\n        if (!(1 & a)) {\n          var v = h && P.call(t, \"__wrapped__\"),\n              m = g && P.call(e, \"__wrapped__\");\n\n          if (v || m) {\n            var S = v ? t.value() : t,\n                x = m ? e.value() : e;\n            return c || (c = new it()), u(S, x, a, s, c);\n          }\n        }\n\n        if (!y) return !1;\n        return c || (c = new it()), function (t, e, n, o, r, i) {\n          var a = 1 & n,\n              s = ht(t),\n              u = s.length,\n              c = ht(e).length;\n          if (u != c && !a) return !1;\n          var l = u;\n\n          for (; l--;) {\n            var d = s[l];\n            if (!(a ? d in e : P.call(e, d))) return !1;\n          }\n\n          var p = i.get(t);\n          if (p && i.get(e)) return p == e;\n          var f = !0;\n          i.set(t, e), i.set(e, t);\n          var h = a;\n\n          for (; ++l < u;) {\n            d = s[l];\n            var g = t[d],\n                y = e[d];\n            if (o) var v = a ? o(y, g, d, e, t, i) : o(g, y, d, t, e, i);\n\n            if (!(void 0 === v ? g === y || r(g, y, n, o, i) : v)) {\n              f = !1;\n              break;\n            }\n\n            h || (h = \"constructor\" == d);\n          }\n\n          if (f && !h) {\n            var m = t.constructor,\n                b = e.constructor;\n            m == b || !(\"constructor\" in t) || !(\"constructor\" in e) || \"function\" == typeof m && m instanceof m && \"function\" == typeof b && b instanceof b || (f = !1);\n          }\n\n          return i.delete(t), i.delete(e), f;\n        }(t, e, a, s, u, c);\n      }(t, e, a, s, lt, u));\n    }\n\n    function dt(t) {\n      return !(!It(t) || function (t) {\n        return !!F && F in t;\n      }(t)) && (Mt(t) ? k : a).test(_t(t));\n    }\n\n    function pt(t) {\n      if (n = (e = t) && e.constructor, o = \"function\" == typeof n && n.prototype || w, e !== o) return V(t);\n      var e,\n          n,\n          o,\n          r = [];\n\n      for (var i in Object(t)) P.call(t, i) && \"constructor\" != i && r.push(i);\n\n      return r;\n    }\n\n    function ft(t, e, n, o, r, i) {\n      var a = 1 & n,\n          s = t.length,\n          u = e.length;\n      if (s != u && !(a && u > s)) return !1;\n      var c = i.get(t);\n      if (c && i.get(e)) return c == e;\n      var l = -1,\n          d = !0,\n          p = 2 & n ? new rt() : void 0;\n\n      for (i.set(t, e), i.set(e, t); ++l < s;) {\n        var f = t[l],\n            h = e[l];\n        if (o) var g = a ? o(h, f, l, e, t, i) : o(f, h, l, t, e, i);\n\n        if (void 0 !== g) {\n          if (g) continue;\n          d = !1;\n          break;\n        }\n\n        if (p) {\n          if (!m(e, function (t, e) {\n            if (a = e, !p.has(a) && (f === t || r(f, t, n, o, i))) return p.push(e);\n            var a;\n          })) {\n            d = !1;\n            break;\n          }\n        } else if (f !== h && !r(f, h, n, o, i)) {\n          d = !1;\n          break;\n        }\n      }\n\n      return i.delete(t), i.delete(e), d;\n    }\n\n    function ht(t) {\n      return function (t, e, n) {\n        var o = e(t);\n        return Ct(t) ? o : function (t, e) {\n          for (var n = -1, o = e.length, r = t.length; ++n < o;) t[r + n] = e[n];\n\n          return t;\n        }(o, n(t));\n      }(t, Ft, vt);\n    }\n\n    function gt(t, e) {\n      var n,\n          o,\n          r = t.__data__;\n      return (\"string\" == (o = typeof (n = e)) || \"number\" == o || \"symbol\" == o || \"boolean\" == o ? \"__proto__\" !== n : null === n) ? r[\"string\" == typeof e ? \"string\" : \"hash\"] : r.map;\n    }\n\n    function yt(t, e) {\n      var n = function (t, e) {\n        return null == t ? void 0 : t[e];\n      }(t, e);\n\n      return dt(n) ? n : void 0;\n    }\n\n    et.prototype.clear = function () {\n      this.__data__ = q ? q(null) : {}, this.size = 0;\n    }, et.prototype.delete = function (t) {\n      var e = this.has(t) && delete this.__data__[t];\n      return this.size -= e ? 1 : 0, e;\n    }, et.prototype.get = function (t) {\n      var e = this.__data__;\n\n      if (q) {\n        var n = e[t];\n        return \"__lodash_hash_undefined__\" === n ? void 0 : n;\n      }\n\n      return P.call(e, t) ? e[t] : void 0;\n    }, et.prototype.has = function (t) {\n      var e = this.__data__;\n      return q ? void 0 !== e[t] : P.call(e, t);\n    }, et.prototype.set = function (t, e) {\n      var n = this.__data__;\n      return this.size += this.has(t) ? 0 : 1, n[t] = q && void 0 === e ? \"__lodash_hash_undefined__\" : e, this;\n    }, nt.prototype.clear = function () {\n      this.__data__ = [], this.size = 0;\n    }, nt.prototype.delete = function (t) {\n      var e = this.__data__,\n          n = st(e, t);\n      return !(n < 0) && (n == e.length - 1 ? e.pop() : N.call(e, n, 1), --this.size, !0);\n    }, nt.prototype.get = function (t) {\n      var e = this.__data__,\n          n = st(e, t);\n      return n < 0 ? void 0 : e[n][1];\n    }, nt.prototype.has = function (t) {\n      return st(this.__data__, t) > -1;\n    }, nt.prototype.set = function (t, e) {\n      var n = this.__data__,\n          o = st(n, t);\n      return o < 0 ? (++this.size, n.push([t, e])) : n[o][1] = e, this;\n    }, ot.prototype.clear = function () {\n      this.size = 0, this.__data__ = {\n        hash: new et(),\n        map: new (G || nt)(),\n        string: new et()\n      };\n    }, ot.prototype.delete = function (t) {\n      var e = gt(this, t).delete(t);\n      return this.size -= e ? 1 : 0, e;\n    }, ot.prototype.get = function (t) {\n      return gt(this, t).get(t);\n    }, ot.prototype.has = function (t) {\n      return gt(this, t).has(t);\n    }, ot.prototype.set = function (t, e) {\n      var n = gt(this, t),\n          o = n.size;\n      return n.set(t, e), this.size += n.size == o ? 0 : 1, this;\n    }, rt.prototype.add = rt.prototype.push = function (t) {\n      return this.__data__.set(t, \"__lodash_hash_undefined__\"), this;\n    }, rt.prototype.has = function (t) {\n      return this.__data__.has(t);\n    }, it.prototype.clear = function () {\n      this.__data__ = new nt(), this.size = 0;\n    }, it.prototype.delete = function (t) {\n      var e = this.__data__,\n          n = e.delete(t);\n      return this.size = e.size, n;\n    }, it.prototype.get = function (t) {\n      return this.__data__.get(t);\n    }, it.prototype.has = function (t) {\n      return this.__data__.has(t);\n    }, it.prototype.set = function (t, e) {\n      var n = this.__data__;\n\n      if (n instanceof nt) {\n        var o = n.__data__;\n        if (!G || o.length < 199) return o.push([t, e]), this.size = ++n.size, this;\n        n = this.__data__ = new ot(o);\n      }\n\n      return n.set(t, e), this.size = n.size, this;\n    };\n    var vt = R ? function (t) {\n      return null == t ? [] : (t = Object(t), function (t, e) {\n        for (var n = -1, o = null == t ? 0 : t.length, r = 0, i = []; ++n < o;) {\n          var a = t[n];\n          e(a, n, t) && (i[r++] = a);\n        }\n\n        return i;\n      }(R(t), function (e) {\n        return D.call(t, e);\n      }));\n    } : function () {\n      return [];\n    },\n        mt = ut;\n\n    function bt(t, e) {\n      return !!(e = null == e ? 9007199254740991 : e) && (\"number\" == typeof t || s.test(t)) && t > -1 && t % 1 == 0 && t < e;\n    }\n\n    function _t(t) {\n      if (null != t) {\n        try {\n          return L.call(t);\n        } catch (t) {}\n\n        try {\n          return t + \"\";\n        } catch (t) {}\n      }\n\n      return \"\";\n    }\n\n    function St(t, e) {\n      return t === e || t != t && e != e;\n    }\n\n    (J && \"[object DataView]\" != mt(new J(new ArrayBuffer(1))) || G && mt(new G()) != o || z && \"[object Promise]\" != mt(z.resolve()) || $ && mt(new $()) != i || W && \"[object WeakMap]\" != mt(new W())) && (mt = function (t) {\n      var e = ut(t),\n          n = e == r ? t.constructor : void 0,\n          a = n ? _t(n) : \"\";\n      if (a) switch (a) {\n        case Y:\n          return \"[object DataView]\";\n\n        case Z:\n          return o;\n\n        case K:\n          return \"[object Promise]\";\n\n        case X:\n          return i;\n\n        case H:\n          return \"[object WeakMap]\";\n      }\n      return e;\n    });\n    var xt = ct(function () {\n      return arguments;\n    }()) ? ct : function (t) {\n      return Lt(t) && P.call(t, \"callee\") && !D.call(t, \"callee\");\n    },\n        Ct = Array.isArray;\n\n    var Et = B || function () {\n      return !1;\n    };\n\n    function Mt(t) {\n      if (!It(t)) return !1;\n      var e = ut(t);\n      return \"[object Function]\" == e || \"[object GeneratorFunction]\" == e || \"[object AsyncFunction]\" == e || \"[object Proxy]\" == e;\n    }\n\n    function wt(t) {\n      return \"number\" == typeof t && t > -1 && t % 1 == 0 && t <= 9007199254740991;\n    }\n\n    function It(t) {\n      var e = typeof t;\n      return null != t && (\"object\" == e || \"function\" == e);\n    }\n\n    function Lt(t) {\n      return null != t && \"object\" == typeof t;\n    }\n\n    var Pt = v ? function (t) {\n      return function (e) {\n        return t(e);\n      };\n    }(v) : function (t) {\n      return Lt(t) && wt(t.length) && !!u[ut(t)];\n    };\n\n    function Ft(t) {\n      return null != (e = t) && wt(e.length) && !Mt(e) ? at(t) : pt(t);\n      var e;\n    }\n\n    t.exports = function (t, e) {\n      return lt(t, e);\n    };\n  });\n  var ve = {\n    Polygon: ft,\n    LineString: pt,\n    Point: dt,\n    MultiPolygon: yt,\n    MultiLineString: yt,\n    MultiPoint: yt\n  };\n\n  function me(t, e) {\n    return e.modes = j, e.getFeatureIdsAt = function (e) {\n      return nt.click({\n        point: e\n      }, null, t).map(function (t) {\n        return t.properties.id;\n      });\n    }, e.getSelectedIds = function () {\n      return t.store.getSelectedIds();\n    }, e.getSelected = function () {\n      return {\n        type: P,\n        features: t.store.getSelectedIds().map(function (e) {\n          return t.store.get(e);\n        }).map(function (t) {\n          return t.toGeoJSON();\n        })\n      };\n    }, e.getSelectedPoints = function () {\n      return {\n        type: P,\n        features: t.store.getSelectedCoordinates().map(function (t) {\n          return {\n            type: M,\n            properties: {},\n            geometry: {\n              type: L,\n              coordinates: t.coordinates\n            }\n          };\n        })\n      };\n    }, e.set = function (n) {\n      if (void 0 === n.type || n.type !== P || !Array.isArray(n.features)) throw new Error(\"Invalid FeatureCollection\");\n      var o = t.store.createRenderBatch(),\n          r = t.store.getAllIds().slice(),\n          i = e.add(n),\n          a = new tt(i);\n      return (r = r.filter(function (t) {\n        return !a.has(t);\n      })).length && e.delete(r), o(), i;\n    }, e.add = function (e) {\n      var n = JSON.parse(JSON.stringify(zt(e))).features.map(function (e) {\n        if (e.id = e.id || ct(), null === e.geometry) throw new Error(\"Invalid geometry: null\");\n\n        if (void 0 === t.store.get(e.id) || t.store.get(e.id).type !== e.geometry.type) {\n          var n = ve[e.geometry.type];\n          if (void 0 === n) throw new Error(\"Invalid geometry type: \" + e.geometry.type + \".\");\n          var o = new n(t, e);\n          t.store.add(o);\n        } else {\n          var r = t.store.get(e.id);\n          r.properties = e.properties, ye(r.getCoordinates(), e.geometry.coordinates) || r.incomingCoords(e.geometry.coordinates);\n        }\n\n        return e.id;\n      });\n      return t.store.render(), n;\n    }, e.get = function (e) {\n      var n = t.store.get(e);\n      if (n) return n.toGeoJSON();\n    }, e.getAll = function () {\n      return {\n        type: P,\n        features: t.store.getAll().map(function (t) {\n          return t.toGeoJSON();\n        })\n      };\n    }, e.delete = function (n) {\n      return t.store.delete(n, {\n        silent: !0\n      }), e.getMode() !== j.DIRECT_SELECT || t.store.getSelectedIds().length ? t.store.render() : t.events.changeMode(j.SIMPLE_SELECT, void 0, {\n        silent: !0\n      }), e;\n    }, e.deleteAll = function () {\n      return t.store.delete(t.store.getAllIds(), {\n        silent: !0\n      }), e.getMode() === j.DIRECT_SELECT ? t.events.changeMode(j.SIMPLE_SELECT, void 0, {\n        silent: !0\n      }) : t.store.render(), e;\n    }, e.changeMode = function (n, o) {\n      return void 0 === o && (o = {}), n === j.SIMPLE_SELECT && e.getMode() === j.SIMPLE_SELECT ? (r = o.featureIds || [], i = t.store.getSelectedIds(), r.length === i.length && JSON.stringify(r.map(function (t) {\n        return t;\n      }).sort()) === JSON.stringify(i.map(function (t) {\n        return t;\n      }).sort()) || (t.store.setSelected(o.featureIds, {\n        silent: !0\n      }), t.store.render()), e) : (n === j.DIRECT_SELECT && e.getMode() === j.DIRECT_SELECT && o.featureId === t.store.getSelectedIds()[0] || t.events.changeMode(n, o, {\n        silent: !0\n      }), e);\n      var r, i;\n    }, e.getMode = function () {\n      return t.events.getMode();\n    }, e.trash = function () {\n      return t.events.trash({\n        silent: !0\n      }), e;\n    }, e.combineFeatures = function () {\n      return t.events.combineFeatures({\n        silent: !0\n      }), e;\n    }, e.uncombineFeatures = function () {\n      return t.events.uncombineFeatures({\n        silent: !0\n      }), e;\n    }, e.setFeatureProperty = function (n, o, r) {\n      return t.store.setFeatureProperty(n, o, r), e;\n    }, e;\n  }\n\n  var be = function (t, e) {\n    var n = {\n      options: t = function (t) {\n        void 0 === t && (t = {});\n        var e = Mt(t);\n        return t.controls || (e.controls = {}), !1 === t.displayControlsDefault ? e.controls = Mt(he, t.controls) : e.controls = Mt(fe, t.controls), (e = Mt(pe, e)).styles = ge(e.styles, \"cold\").concat(ge(e.styles, \"hot\")), e;\n      }(t)\n    };\n    e = me(n, e), n.api = e;\n    var o = Lt(n);\n    return e.onAdd = o.onAdd, e.onRemove = o.onRemove, e.types = E, e.options = t, e;\n  };\n\n  function _e(t) {\n    be(t, this);\n  }\n\n  return _e.modes = de, _e;\n});","map":null,"metadata":{},"sourceType":"script"}