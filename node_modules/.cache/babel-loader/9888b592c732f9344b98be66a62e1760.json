{"ast":null,"code":"import iconLeft from '../icons/left';\nimport iconRight from '../icons/right';\nvar Direction;\n\n(function (Direction) {\n  Direction[\"Next\"] = \"next\";\n  Direction[\"Prev\"] = \"prev\";\n})(Direction || (Direction = {}));\n\nfunction getData(feature) {\n  var _a;\n\n  const layerData = ['layer', {\n    key: 'id',\n    value: feature.layer.id\n  }, {\n    key: 'type',\n    value: feature.layer.type\n  }, {\n    key: 'source',\n    value: feature.layer.source\n  }, {\n    key: 'source-layer',\n    value: (_a = feature.layer['source-layer']) !== null && _a !== void 0 ? _a : 'â€”'\n  }];\n  const featureData = ['properties'];\n\n  if (feature.id) {\n    featureData.push({\n      key: '$id',\n      value: feature.id\n    });\n  }\n\n  Object.entries(feature.properties).forEach(_ref => {\n    let [key, value] = _ref;\n    featureData.push({\n      key,\n      value\n    });\n  });\n\n  if (featureData.length === 1) {\n    featureData.pop(); // remove title if there are no properties\n  }\n\n  return [...layerData, ...featureData];\n}\n\nexport default function popupTemplate(features) {\n  let current = 0;\n  const root = document.createElement('div');\n  root.classList.add('mapbox-control-inspect-popup');\n  const content = document.createElement('div');\n  content.classList.add('mapbox-control-inspect-content');\n\n  const templatePrev = () => {\n    const button = document.createElement('div');\n    button.setAttribute('type', 'button');\n    button.classList.add('mapbox-control-inspect-prev');\n    button.appendChild(iconLeft());\n    button.addEventListener('click', () => goTo(Direction.Prev));\n    return button;\n  };\n\n  const templateNext = () => {\n    const button = document.createElement('div');\n    button.setAttribute('type', 'button');\n    button.classList.add('mapbox-control-inspect-next');\n    button.appendChild(iconRight());\n    button.addEventListener('click', () => goTo(Direction.Next));\n    return button;\n  };\n\n  const templateTitle = () => {\n    const title = document.createElement('div');\n    title.classList.add('mapbox-control-inspect-current');\n    title.textContent = `${current + 1} / ${features.length}`;\n    return title;\n  };\n\n  const templateHeader = () => {\n    const header = document.createElement('div');\n    header.classList.add('mapbox-control-inspect-header');\n    header.appendChild(templatePrev());\n    header.appendChild(templateTitle());\n    header.appendChild(templateNext());\n    return header;\n  };\n\n  const templateFeature = feature => {\n    const table = document.createElement('table');\n    table.classList.add('mapbox-control-inspect-grid');\n    const data = getData(feature);\n    data.forEach(record => {\n      const row = document.createElement('tr');\n\n      if (typeof record === 'string') {\n        const caption = document.createElement('th');\n        caption.classList.add('mapbox-control-inspect-caption');\n        caption.colSpan = 2;\n        caption.textContent = record;\n        row.appendChild(caption);\n        table.append(row);\n        return;\n      }\n\n      const key = document.createElement('th');\n      const value = document.createElement('td');\n      key.classList.add('mapbox-control-inspect-key');\n      value.classList.add('mapbox-control-inspect-value');\n      key.textContent = record.key;\n      value.textContent = String(record.value);\n      row.appendChild(key);\n      row.appendChild(value);\n      table.append(row);\n    });\n    return table;\n  };\n\n  function goTo(dir) {\n    if (dir === Direction.Prev) {\n      current = current !== 0 ? current - 1 : features.length - 1;\n    } else if (dir === Direction.Next) {\n      current = current !== features.length - 1 ? current + 1 : 0;\n    }\n\n    content.innerHTML = '';\n    content.appendChild(templateHeader());\n    content.appendChild(templateFeature(features[current]));\n  }\n\n  root.appendChild(content);\n\n  if (!features.length) {\n    content.textContent = 'No features';\n  } else {\n    if (features.length > 1) {\n      content.appendChild(templateHeader());\n    }\n\n    content.appendChild(templateFeature(features[current]));\n  }\n\n  return root;\n}","map":null,"metadata":{},"sourceType":"module"}