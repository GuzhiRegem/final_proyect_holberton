{"ast":null,"code":"var _jsxFileName = \"/home/pegatzu/final_proyect_holberton/src/components/Routes/MapRouteView.jsx\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport mapboxgl from 'mapbox-gl';\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\nimport '../../style/map.css';\nimport axios from \"axios\";\nimport { Apiurl } from '../../services/apirest';\nexport function MapRouteView(id) {\n  const mapContainer = useRef(null);\n  const [map, setMap] = useState(null);\n  const [lng, setLng] = useState(-56.073358);\n  const [lat, setLat] = useState(-34.791454);\n  const [zoom, setZoom] = useState(11);\n  useEffect(() => {\n    mapboxgl.accessToken = \"pk.eyJ1IjoiYm9saW9saWFndXN0aW4iLCJhIjoiY2t6eDVzcWY5NDJoNTJucW9xaHY2bXA2dCJ9.ZR3iXpsXSNMjzh9Nj-0EDQ\";\n\n    const initializeMap = _ref => {\n      let {\n        setMap,\n        mapContainer\n      } = _ref;\n      const map = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: \"mapbox://styles/mapbox/streets-v11\",\n        // stylesheet location\n        center: [lng, lat],\n        zoom: zoom,\n        maxPitch: 60\n      });\n      map.addControl(new mapboxgl.FullscreenControl());\n      let url = Apiurl + \"/api/routes/data/\" + id.id;\n      axios.get(url).then(res => {\n        const out = res.data;\n        map.addSource('bus_route', {\n          type: 'geojson',\n          data: out\n        });\n        map.addLayer({\n          id: 'bus_route_line',\n          type: 'line',\n          source: 'bus_route',\n          layout: {\n            'line-join': 'round',\n            'line-cap': 'round'\n          },\n          paint: {\n            'line-color': '#4eb068',\n            'line-width': 8\n          },\n          filter: ['==', '$type', 'LineString']\n        });\n        map.addLayer({\n          id: 'bus_route_stops',\n          type: 'circle',\n          source: 'bus_route',\n          paint: {\n            'circle-radius': 10,\n            'circle-color': '#4eb068'\n          },\n          filter: ['==', '$type', 'Point']\n        });\n        const points = [];\n\n        for (let i = 1; out.features[0].geometry.coordinates[i]; i++) {\n          points.push(out.features[0].geometry.coordinates[i]);\n        }\n\n        var bounds = points.reduce(function (bounds, coord) {\n          return bounds.extend(coord);\n        }, new mapboxgl.LngLatBounds(points[0], points[0]));\n        map.fitBounds(bounds, {\n          padding: 50,\n          duration: 0\n        });\n        map.on('load', function () {\n          document.querySelector('.mapboxgl-canvas').style.opacity = '100%';\n          map.easeTo({\n            pitch: 30,\n            duration: 3000\n          });\n        });\n      });\n    };\n\n    if (!map) initializeMap({\n      setMap,\n      mapContainer,\n      lat,\n      lng,\n      zoom\n    });\n  }, [map, mapContainer, lat, lng, zoom]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: el => mapContainer.current = el,\n    className: \"mapContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 10\n    }\n  });\n}\n;","map":{"version":3,"sources":["/home/pegatzu/final_proyect_holberton/src/components/Routes/MapRouteView.jsx"],"names":["React","useEffect","useRef","useState","mapboxgl","axios","Apiurl","MapRouteView","id","mapContainer","map","setMap","lng","setLng","lat","setLat","zoom","setZoom","accessToken","initializeMap","Map","container","current","style","center","maxPitch","addControl","FullscreenControl","url","get","then","res","out","data","addSource","type","addLayer","source","layout","paint","filter","points","i","features","geometry","coordinates","push","bounds","reduce","coord","extend","LngLatBounds","fitBounds","padding","duration","on","document","querySelector","opacity","easeTo","pitch","el"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport mapboxgl from 'mapbox-gl'\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css'\nimport '../../style/map.css'\nimport axios from \"axios\";\nimport { Apiurl } from '../../services/apirest';\n\nexport function MapRouteView(id) {\n\n  const mapContainer = useRef(null);\n  const [map, setMap] = useState(null);\n  const [lng, setLng] = useState(-56.073358);\n  const [lat, setLat] = useState(-34.791454);\n  const [zoom, setZoom] = useState(11);\n\n\n  useEffect(() => {\n    mapboxgl.accessToken = \"pk.eyJ1IjoiYm9saW9saWFndXN0aW4iLCJhIjoiY2t6eDVzcWY5NDJoNTJucW9xaHY2bXA2dCJ9.ZR3iXpsXSNMjzh9Nj-0EDQ\"\n    const initializeMap = ({ setMap, mapContainer }) => {\n      const map = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: \"mapbox://styles/mapbox/streets-v11\", // stylesheet location\n        center: [lng, lat],\n        zoom: zoom,\n        maxPitch: 60\n      });\n      map.addControl(new mapboxgl.FullscreenControl());\n      let url = Apiurl + \"/api/routes/data/\" + id.id\n      axios.get(url)\n        .then(res => {\n          const out = res.data\n          map.addSource('bus_route', {\n            type: 'geojson',\n            data: out\n          });\n\n          map.addLayer({\n            id: 'bus_route_line',\n            type: 'line',\n            source: 'bus_route',\n            layout: {\n              'line-join': 'round',\n              'line-cap': 'round'\n            },\n            paint: {\n              'line-color': '#4eb068',\n              'line-width': 8\n            },\n            filter: ['==', '$type', 'LineString']\n          });\n\n          map.addLayer({\n            id: 'bus_route_stops',\n            type: 'circle',\n            source: 'bus_route',\n            paint: {\n              'circle-radius': 10,\n              'circle-color': '#4eb068'\n            },\n            filter: ['==', '$type', 'Point']\n          });\n          const points = []\n          for (let i = 1; out.features[0].geometry.coordinates[i]; i++) {\n            points.push(out.features[0].geometry.coordinates[i])\n          }\n          var bounds = points.reduce(function (bounds, coord) {\n            return bounds.extend(coord);\n          }, new mapboxgl.LngLatBounds(points[0], points[0]));\n          map.fitBounds(bounds, {\n            padding: 50,\n            duration: 0\n          });\n          map.on('load', function () {\n            document.querySelector('.mapboxgl-canvas').style.opacity = '100%';\n            map.easeTo({\n              pitch: 30,\n              duration: 3000\n            })\n          });\n        })\n    };\n\n    if (!map) initializeMap({ setMap, mapContainer, lat, lng, zoom });\n  }, [map, mapContainer, lat, lng, zoom]);\n  return <div ref={el => (mapContainer.current = el)} className=\"mapContainer\" />;\n};\n\n\n"]},"metadata":{},"sourceType":"module"}